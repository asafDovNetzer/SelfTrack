(this["webpackJsonpself-track"]=this["webpackJsonpself-track"]||[]).push([[4],{313:function(e,t,n){e.exports={Stopwatch:"Stopwatch_Stopwatch__1Sm-9",ExpandButton:"Stopwatch_ExpandButton__3TVfW",Content:"Stopwatch_Content__3seJN",Details:"Stopwatch_Details__YDYYc",Accordion:"Stopwatch_Accordion__2RGPL",MainButton:"Stopwatch_MainButton__Xtp0K"}},314:function(e,t,n){e.exports={Rater:"Rater_Rater__Rw26d",Content:"Rater_Content__3fnIG",Details:"Rater_Details__3xoiD",Accordion:"Rater_Accordion__1KrNl",Rating:"Rater_Rating__fa4Sp"}},315:function(e,t,n){e.exports={Content:"Counter_Content__3GsA1",Buttons:"Counter_Buttons__36Npi",Counter:"Counter_Counter__18qwd",Details:"Counter_Details__38vm4",Accordion:"Counter_Accordion__2uY5T"}},340:function(e,t,n){e.exports={Field:"TrackerForm_Field__3zk3b"}},452:function(e,t,n){e.exports={CardHeader:"SurveyForm_CardHeader__3GZP2",List:"SurveyForm_List__3VN1A",Transfer:"SurveyForm_Transfer__NIDYV",Movers:"SurveyForm_Movers__ZnRYR"}},453:function(e,t,n){e.exports={Trackers:"Trackers_Trackers__1zNZe",ControlPanel:"Trackers_ControlPanel__2Ru5m"}},454:function(e,t,n){e.exports={Entries:"StopwatchEntries_Entries__trl9H",NewEntryButton:"StopwatchEntries_NewEntryButton__25tlb",Tablehead:"StopwatchEntries_Tablehead__1t_kg",ListItem:"StopwatchEntries_ListItem__3ni0F",Dropdown:"StopwatchEntries_Dropdown__24rx5"}},455:function(e,t,n){e.exports={BarChartPreAmp:"BarChartPreAmp_BarChartPreAmp__3-nTm"}},456:function(e,t,n){e.exports={BarChart:"BarChart_BarChart__3cQVs"}},457:function(e,t,n){e.exports={Field:"EntryEditForm_Field__3Tdcb",Limit:"EntryEditForm_Limit__3WxXf",Form:"EntryEditForm_Form__3lfW3"}},462:function(e,t,n){e.exports={Checker:"Checker_Checker__2Ib52",Content:"Checker_Content__34-M0",Details:"Checker_Details__21oGr",Accordion:"Checker_Accordion__ruJdu"}},476:function(e,t,n){e.exports={DataPanel:"DataPanel_DataPanel__2TvCl",Chart:"DataPanel_Chart__2NxcX",Divider:"DataPanel_Divider__2LcUt"}},477:function(e,t,n){e.exports={TrackerSelector:"TrackerSelector_TrackerSelector__13Imw"}},478:function(e,t,n){e.exports={Label:"Label_Label__1Ou9W"}},479:function(e,t,n){e.exports={Selector:"RangeSelector_Selector__1o0hR",Calender:"RangeSelector_Calender__3YZIM"}},484:function(e,t,n){e.exports={BarChart:"BarLineChart_BarChart__UHoXd"}},534:function(e,t,n){"use strict";n.r(t);var c=n(20),a=n(1),r=n.n(a),o=n(36),i=n(120),s=n(147),l=n(536),d=n(514),u=n(340),h=n.n(u),j=n(487),b=n(323),m=n(96),f=n(0),O=n.n(f),p=n(2),g=n(3),x=n(488),v=function e(t,n,c,a){Object(g.a)(this,e),this.name=void 0,this.description=void 0,this.color=void 0,this.id=void 0,this.type=void 0,this.size=void 0,this.name=t,this.description=n,this.color=c,this.type="stopwatch",this.id=a||Object(x.a)(),this.size=0},y=function e(t,n,c,a){Object(g.a)(this,e),this.name=void 0,this.description=void 0,this.color=void 0,this.id=void 0,this.type=void 0,this.size=void 0,this.name=t,this.description=n,this.color=c,this.id=a||Object(x.a)(),this.type="checker",this.size=0},w=function e(t,n,c,a,r){Object(g.a)(this,e),this.name=void 0,this.description=void 0,this.color=void 0,this.id=void 0,this.type=void 0,this.size=void 0,this.name=t,this.description=n,this.color=c,this.id=r||Object(x.a)(),this.type="counter",this.size=a},C=function e(t,n,c,a){Object(g.a)(this,e),this.name=void 0,this.description=void 0,this.color=void 0,this.id=void 0,this.type=void 0,this.size=void 0,this.name=t,this.description=n,this.color=c,this.id=a||Object(x.a)(),this.type="rater",this.size=0},k={toFirestore:function(e){return{name:e.name,description:e.description,color:e.color,id:e.id,type:e.type,size:e.size}},fromFirestore:function(e){var t,n=e.data();switch(n.type){case"stopwatch":t=new v(n.name,n.description,n.color,n.id);break;case"rater":t=new C(n.name,n.description,n.color,n.id);break;case"counter":t=new w(n.name,n.description,n.color,n.size,n.id);break;default:t=new y(n.name,n.description,n.color,n.id)}return t}},S=n(313),_=n.n(S),E=n(314),M=n.n(E),D=n(315),T=n.n(D),N=n(98),I=n(539),F=n(538),H=n(512),R=n(513),Y=n(15),z=r.a.memo((function(e){var t,n=e.type,r=e.color,o=e.name,i=e.size,s=Object(a.useState)(0),l=Object(c.a)(s,2),d=l[0],u=l[1];switch(console.log(n),n){case"stopwatch":t=Object(Y.jsxs)("div",{className:_.a.Content,children:[Object(Y.jsx)("button",{className:"".concat(_.a.MainButton,"     main-button"),children:Object(Y.jsx)("svg",{width:"50",height:"50",fill:"currentColor",children:Object(Y.jsx)("use",{href:"".concat(N.a,"#play-circle")})})}),Object(Y.jsx)("h5",{style:{color:"grey"},children:o}),Object(Y.jsx)("h3",{style:{margin:"auto auto",display:"block",textAlign:"center"},children:"00:00:00"})]});break;case"checker":t=Object(Y.jsxs)("div",{className:M.a.Content,children:[Object(Y.jsx)("h5",{style:{color:"grey "},children:o}),Object(Y.jsx)(F.a,{checked:!0,className:"main-button",color:"primary"})]});break;case"counter":t=Object(Y.jsxs)("div",{className:T.a.Content,children:[Object(Y.jsx)("h5",{style:{color:"grey "},children:o}),Object(Y.jsxs)(H.a,{color:"primary",children:[Object(Y.jsx)(R.a,{onClick:function(){return u(d+i)},children:Object(Y.jsx)("svg",{width:"20",height:"20",fill:"currentColor",children:Object(Y.jsx)("use",{href:"".concat(N.a,"#plus")})})}),Object(Y.jsx)(R.a,{color:"primary",children:d}),Object(Y.jsx)(R.a,{onClick:function(){return u(d-i<0?0:d-i)},disabled:0===d,children:Object(Y.jsx)("svg",{width:"20",height:"20",fill:"currentColor",children:Object(Y.jsx)("use",{href:"".concat(N.a,"#dash")})})})]})]});break;default:t=Object(Y.jsxs)("div",{className:M.a.Content,children:[Object(Y.jsx)("h5",{style:{color:"grey "},children:o}),Object(Y.jsx)(I.a,{className:M.a.Rating,name:"stars",defaultValue:3,size:"large"})]})}return Object(Y.jsx)("div",{className:M.a.Rater,style:{borderLeftColor:r},children:t})})),B=n(540),A=r.a.memo((function(e){var t=e.show,n=e.selected,r=e.closeHandler,o=e.type,u=Object(a.useState)(1),f=Object(c.a)(u,2),O=f[0],p=f[1],g=Object(a.useState)(1),x=Object(c.a)(g,2),S=x[0],_=x[1],E=Object(a.useState)("#000000"),M=Object(c.a)(E,2),D=M[0],T=M[1],N=Object(a.useState)({}),I=Object(c.a)(N,2),F=I[0],H=I[1],R=Object(a.useState)("Give me a cool name"),A=Object(c.a)(R,2),L=A[0],P=A[1],V=Object(a.useState)(""),W=Object(c.a)(V,2),G=W[0],X=W[1],Z=Object(a.useState)("1"),J=Object(c.a)(Z,2),q=J[0],K=J[1],U=Object(a.useContext)(m.a);Object(a.useEffect)((function(){n&&(P(n.name),T(n.color),X(n.description),K(n.size?n.size.toString():"1"))}),[n]),Object(a.useEffect)((function(){_("counter"!==o?1:2)}),[o]);var Q=function(){T("#000000"),P("Give me a cool name"),K("1"),X(""),H({}),p(1),r()},$=function(){n||function(e,t,n,c,a,r){var o;switch(t){case"stopwatch":o=new v(n,c,a);break;case"checker":o=new y(n,c,a);break;case"counter":o=new w(n,c,a,+r);break;default:o=new C(n,c,a)}e.collection("trackers").doc(o.id).withConverter(k).set(o).then((function(){})).catch((function(e){console.log(e)}))}(U,o,L,G,D,q),n&&function(e,t,n,c,a,r){console.log(t),e.collection("trackers").doc(t).update({name:n,description:c,color:a,size:+r}).then((function(){})).catch((function(e){console.log(e)}))}(U,n.id,L,G,D,q),Q()},ee=function(e){T(e.hex)},te=function(e){K(e.target.value)},ne={name:n?n.name:"",description:n?n.description:""},ce=Object(Y.jsx)(b.c,{initialValues:ne,onSubmit:function(){$()},validate:function(e){var t={};e.name?e.name.length>15?t.name="Must be 15 characters or less":e.name.length<4&&(t.name="Must be 4 characters or more"):(t.name="Required",P("Give me a cool name")),H(t),P(e.name),X(e.description)},children:function(){return Object(Y.jsxs)(b.b,{className:h.a.Form,children:[Object(Y.jsxs)("div",{style:{display:1===O?"unset":"none"},children:[Object(Y.jsxs)("div",{className:h.a.Field,children:[Object(Y.jsx)("label",{children:"Name:"}),Object(Y.jsx)(b.a,{type:"text",name:"name",placeholder:"e.g Watching T.V..."})]}),Object(Y.jsx)("p",{style:{color:"red"},children:F.name}),Object(Y.jsx)(d.a,{variant:"middle"}),Object(Y.jsxs)("div",{className:h.a.Field,children:[Object(Y.jsx)("label",{children:"Description:"}),Object(Y.jsx)(b.a,{type:"text",as:"textarea",name:"description",placeholder:"e.g The amount of time i spend on watching T.V..."})]}),Object(Y.jsx)(d.a,{variant:"middle"}),Object(Y.jsx)(j.a,{onChangeComplete:ee,color:D})]}),Object(Y.jsxs)("div",{style:{display:2===O?"unset":"none"},children:[Object(Y.jsxs)("div",{className:h.a.Field,children:[Object(Y.jsx)("label",{children:"Choose a step size:"}),Object(Y.jsx)(B.a,{value:q,onChange:te,id:"standard-number",type:"number",variant:"outlined",style:{width:"100px"}})]}),Object(Y.jsx)("p",{style:{color:"red"},children:F.name}),Object(Y.jsx)(d.a,{variant:"middle"})]})]})}});return Object(Y.jsxs)(i.a,{show:t,onHide:Q,children:[Object(Y.jsx)(i.a.Header,{children:Object(Y.jsx)(z,{type:o,color:D,name:L,size:+q})}),Object(Y.jsx)(i.a.Body,{children:ce}),Object(Y.jsxs)(i.a.Footer,{children:[Object(Y.jsx)(s.a,{onClick:Q,variant:"secondary",children:"Close"}),Object(Y.jsx)(l.a,{count:S,page:O,onChange:function(e,t){p(t)}}),Object(Y.jsx)(s.a,{disabled:!!F.name||"#000000"===D,variant:"primary",onClick:$,children:"Save"})]})]})})),L=n(452),P=n.n(L),V=n(521),W=n(544),G=n(518),X=n(519),Z=n(145),J=n(522),q=n(523),K=function(e,t){return e.filter((function(e){return!t.includes(e)}))},U=function(e,t){return e.filter((function(e){return t.includes(e)}))},Q=r.a.memo((function(e){var t=e.show,n=e.closeHandler,r=e.checkers,s=e.raters,l=Object(a.useState)([]),u=Object(c.a)(l,2),h=u[0],j=u[1],b=Object(a.useState)([].concat(Object(o.a)(r),Object(o.a)(s))),f=Object(c.a)(b,2),O=f[0],p=f[1],g=Object(a.useState)([]),x=Object(c.a)(g,2),v=x[0],y=x[1],w=U(h,O),C=U(h,v),k=Object(a.useState)(["raters","checkers"]),S=Object(c.a)(k,2),_=S[0],E=S[1],M=Object(a.useState)(""),D=Object(c.a)(M,2),T=D[0],I=D[1],H=Object(a.useContext)(m.a),z=function(){n()},A=function(e){return function(){var t=h.indexOf(e),n=Object(o.a)(h);-1===t?n.push(e):n.splice(t,1),j(n)}},L=function(e){return U(h,e).length},Q=function(e){return function(){var t,n;L(e)===e.length?j(K(h,e)):j((t=h,n=e,[].concat(Object(o.a)(t),Object(o.a)(K(n,t)))))}},$=function(e,t){E(t)},ee=function(e,t){return Object(Y.jsxs)(G.a,{children:[Object(Y.jsx)(X.a,{className:P.a.CardHeader,avatar:Object(Y.jsx)(F.a,{onClick:Q(t),checked:L(t)===t.length&&0!==t.length,indeterminate:L(t)!==t.length&&0!==L(t),disabled:0===t.length}),title:e,subheader:"".concat(L(t),"/").concat(t.length," selected")}),Object(Y.jsx)(d.a,{}),Object(Y.jsxs)(V.a,{defaultCollapseIcon:Object(Y.jsx)("svg",{width:"20",height:"20",fill:"currentColor",children:Object(Y.jsx)("use",{href:"".concat(N.a,"#chevron-up")})}),defaultExpandIcon:Object(Y.jsx)("svg",{width:"20",height:"20",fill:"currentColor",children:Object(Y.jsx)("use",{href:"".concat(N.a,"#chevron-down")})}),expanded:_,onNodeToggle:$,children:[Object(Y.jsx)(W.a,{nodeId:"raters",label:"Raters",children:t.filter((function(e){return"rater"===e.type})).map((function(e){return Object(Y.jsxs)(Z.a,{role:"listitem",button:!0,onClick:A(e),children:[Object(Y.jsx)(J.a,{children:Object(Y.jsx)(F.a,{checked:h.includes(e),disableRipple:!0})}),Object(Y.jsx)(q.a,{id:e.id,primary:e.name})]},e.id)}))}),Object(Y.jsx)(W.a,{nodeId:"checkers",label:"Checkers",children:t.filter((function(e){return"checker"===e.type})).map((function(e){return Object(Y.jsxs)(Z.a,{role:"listitem",button:!0,onClick:A(e),children:[Object(Y.jsx)(J.a,{children:Object(Y.jsx)(F.a,{checked:h.includes(e),disableRipple:!0})}),Object(Y.jsx)(q.a,{id:e.id,primary:e.name})]},e.id)}))})]})]})},te=Object(Y.jsxs)("form",{className:P.a.Form,children:[Object(Y.jsx)(B.a,{id:"standard-basic",label:"Name",required:!0,value:T,onChange:function(e){I(e.target.value)},error:T.length<4&&T.length>0}),Object(Y.jsxs)("div",{className:P.a.Transfer,children:[ee("Choices",O),Object(Y.jsxs)("div",{className:P.a.Movers,children:[Object(Y.jsx)(R.a,{variant:"outlined",size:"small",onClick:function(){y(v.concat(w)),p(K(O,w)),j(K(h,w))},disabled:0===w.length,children:">"}),Object(Y.jsx)(R.a,{variant:"outlined",size:"small",onClick:function(){p(O.concat(C)),y(K(v,C)),j(K(h,C))},disabled:0===C.length,children:"<"})]}),ee("Chosen",v)]})]});return Object(Y.jsxs)(i.a,{show:t,onHide:z,children:[Object(Y.jsx)(i.a.Header,{}),Object(Y.jsx)(i.a.Body,{children:te}),Object(Y.jsxs)(i.a.Footer,{children:[Object(Y.jsx)(R.a,{onClick:z,children:"Close"}),Object(Y.jsx)(R.a,{onClick:function(){H.collection("surveys").add({name:T,trackers:v.map((function(e){return e.id}))}).then((function(){z()})).catch((function(e){return console.log(e)}))},children:"Save"})]})]})})),$=n(453),ee=n.n($),te=function(e){if(e<0)return"--:--:--";var t=Math.round(e/1e3),n=(t%60).toString().padStart(2,"0"),c=Math.floor(t/60%60).toString().padStart(2,"0"),a=Math.floor(t/3600).toString().padStart(2,"0");return"".concat(a,":").concat(c,":").concat(n)},ne=function(e){var t=new Date(e),n=t.getSeconds().toString().padStart(2,"0"),c=t.getMinutes().toString().padStart(2,"0"),a=t.getHours().toString().padStart(2,"0");return"".concat(a,":").concat(c,":").concat(n)},ce=function(e){var t=e.accum,n=e.isRunning,r=e.lastEntry,o=Object(a.useState)("00:00:00"),i=Object(c.a)(o,2),s=i[0],l=i[1],d=Object(a.useState)(0),u=Object(c.a)(d,2),h=u[0],j=u[1],b=Object(a.useCallback)((function(){j(Date.now()-r)}),[r]);return Object(a.useEffect)((function(){var e;return n||j(0),n&&(b(),e=window.setInterval((function(){b()}),1e3)),function(){window.clearInterval(e)}}),[n,b]),Object(a.useEffect)((function(){var e=te(h+t);l(e)}),[t,r,h]),Object(Y.jsx)("div",{children:Object(Y.jsx)("h3",{style:{margin:"auto auto",display:"block",textAlign:"center",fontWeight:"lighter"},children:s})})},ae=n(69),re=n(50),oe=n(454),ie=n.n(oe),se=n(455),le=n.n(se),de=n(326),ue=n(74),he=n(456),je=n.n(he),be=r.a.memo((function(e){var t=e.chartData,n=Object(a.useRef)(null),c=Object(a.useCallback)((function(e){if(e){var t=e.getContext("2d");t&&(n.current=new de.a(t,{type:"bar",data:{datasets:[]},options:{aspectRatio:8,scales:{x:{stacked:!0,max:24,grid:{display:!1},ticks:{stepSize:4,callback:function(e){return console.log(e),"".concat(e,":00")}}},y:{stacked:!0}},indexAxis:"y",onClick:function(e){var t,n,c=e.chart.config._config.data.datasets;console.log(c);var a=null===(t=e.chart._active[0])||void 0===t?void 0:t.datasetIndex;if(a){var r=null===(n=e.chart._active[0])||void 0===n?void 0:n.index;console.log(a),console.log(r),console.log(c[a].data[r])}},elements:{bar:{borderWidth:1,barThickness:2}},responsive:!0,plugins:{legend:{display:!1},tooltip:{enabled:!1}}}}))}}),[]);return Object(a.useEffect)((function(){n.current&&(n.current.data={labels:[""],datasets:t},n.current.update())}),[t]),Object(Y.jsx)(ue.a,{children:Object(Y.jsx)("div",{className:je.a.BarChart,children:Object(Y.jsx)("canvas",{ref:c})})})})),me=r.a.memo((function(e){var t=e.stopwatch,n=e.entries,r=e.date,i=Object(a.useState)(Date.now()),s=Object(c.a)(i,2),l=s[0],d=s[1],u=Object(a.useState)(null),h=Object(c.a)(u,2),j=h[0],b=h[1];Object(a.useEffect)((function(){var e=[],c=new Date(r.getFullYear(),r.getMonth(),r.getDate()).getTime(),a=new Date(r.getFullYear(),r.getMonth(),r.getDate()+1).getTime(),i=[c].concat(Object(o.a)(n.map((function(e){return e.timestamp}))));console.log(i);var s=l;i.push(s<a?s:a);var d=[],u=null;i.forEach((function(e){u&&d.push((e-u)/36e5),u=e}));var h=function(e){var n="rgb(225, 225, 225)";return e%2&&(n=t.color),n};d.forEach((function(t,n){e.push({data:[t],backgroundColor:h(n)})})),console.log(e),b(e)}),[t,n,r,l]);var m=Object(a.useCallback)((function(){d(Date.now())}),[]);Object(a.useEffect)((function(){var e=setInterval((function(){m()}),6e4);return function(){clearInterval(e)}}),[m]);var f=Object(Y.jsx)("p",{children:"loading..."});return j&&(f=Object(Y.jsx)("div",{className:le.a.BarChartPreamp,children:Object(Y.jsx)(be,{chartData:j})})),f})),fe=n(458),Oe=n(61);function pe(){return(pe=Object(p.a)(O.a.mark((function e(t,n){var c,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=[],n.forEach((function(e){var n=ge(t,e.year,e.month,e.day);c.push(n)})),e.next=4,Promise.all(c);case 4:return a=e.sent,e.abrupt("return",a.map((function(e){return e.docs})));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ge=function(e,t,n,c){return e.collection("entries").where("year","==",t).where("month","==",n).where("day","==",c).orderBy("timestamp","asc").get()};var xe=n(457),ve=n.n(xe),ye=n(108),we=r.a.memo((function(e){var t=e.entry,n=e.submitHandler,r=Object(a.useState)(t.from.timestamp),o=Object(c.a)(r,2),i=o[0],s=o[1],l=Object(a.useState)(t.to.timestamp),d=Object(c.a)(l,2),u=d[0],h=d[1],j=Object(a.useState)(u-i),m=Object(c.a)(j,2),f=m[0],O=m[1],p=new Date(t.from.timestamp),g=new Date(t.to.timestamp),x={fromHour:p.getHours(),fromMinute:p.getMinutes(),fromSecond:p.getSeconds(),toHour:g.getHours(),toMinute:g.getMinutes(),toSecond:g.getSeconds()};return Object(Y.jsx)("div",{children:Object(Y.jsx)(b.c,{initialValues:x,onSubmit:function(e){},validate:function(e){var n={to:!1,from:!1},c=Object(ye.b)(e.fromHour,e.fromMinute,e.fromSecond,t.from.timestamp),a=Object(ye.b)(e.toHour,e.toMinute,e.toSecond,t.to.timestamp),r=c>=t.from.limit,o=c<=a,i=a<=t.to.limit,l=a>c;return r&&o||(n.from=!0),l&&i||(n.to=!0),s(c),h(a),O(a-c),n},children:function(e){var c=e.errors,a=e.values;return Object(Y.jsxs)(b.b,{className:ve.a.Form,children:[Object(Y.jsxs)("div",{className:ve.a.Field,style:{borderColor:c.from?"red":"green"},children:[Object(Y.jsx)("label",{children:"From:"}),Object(Y.jsx)(b.a,{min:0,max:23,type:"number",name:"fromHour"}),Object(Y.jsx)("p",{children:":"}),Object(Y.jsx)(b.a,{min:0,max:59,type:"number",name:"fromMinute"}),Object(Y.jsx)("p",{children:":"}),Object(Y.jsx)(b.a,{min:0,max:59,type:"number",name:"fromSecond"})]}),Object(Y.jsx)("div",{className:ve.a.Limit,children:"Must be between ".concat(Object(ye.c)(t.from.limit)," and ").concat(Object(ye.c)(Object(ye.b)(a.toHour,a.toMinute,a.toSecond,t.to.timestamp)))}),Object(Y.jsxs)("div",{className:ve.a.Field,style:{borderColor:c.to?"red":"green"},children:[Object(Y.jsx)("label",{children:"To:"}),Object(Y.jsx)(b.a,{min:0,max:23,type:"number",name:"toHour"}),Object(Y.jsx)("p",{children:":"}),Object(Y.jsx)(b.a,{min:0,max:59,type:"number",name:"toMinute"}),Object(Y.jsx)("p",{children:":"}),Object(Y.jsx)(b.a,{min:0,max:59,type:"number",name:"toSecond"})]}),Object(Y.jsx)("div",{className:ve.a.Limit,children:"Must be between ".concat(Object(ye.c)(Object(ye.b)(a.fromHour,a.fromMinute,a.fromSecond,t.from.timestamp))," and ").concat(Object(ye.c)(t.to.limit))}),Object(Y.jsx)("div",{className:ve.a.Field,style:{width:"100%",borderColor:c.from?"red":"green"},children:Object(Y.jsxs)("p",{style:{fontWeight:"normal",width:"100%"},children:["Sub-Total: ",te(f)]})}),Object(Y.jsx)("button",{onClick:function(){return n(i,u)},type:"submit",disabled:!!c.to||!!c.from,children:"Save Changes"})]})}})})})),Ce=function(e){var t=e.show,n=e.closeHandler,c=e.editHandler,r=e.entry,o=e.newEntryHandler,s=Object(a.useContext)(m.a),l=function(e,t){console.log("change");var n=re.b.batch(),a=s.collection("entries").doc(r.from.id);if(n.update(a,{timestamp:e}),r.to.id){var i=s.collection("entries").doc(r.to.id);n.update(i,{timestamp:t})}r.to.id||(console.log("do something else"),o(t)),c(n)};return Object(Y.jsxs)(i.a,{show:t,onHide:n,children:[Object(Y.jsx)(i.a.Header,{children:"Change the beginning and ending"}),Object(Y.jsx)(i.a.Body,{children:Object(Y.jsx)(we,{entry:r,submitHandler:function(e,t){(null===r||void 0===r?void 0:r.index)?l(e,t):(o(e),o(t))}})})]})},ke=r.a.memo((function(e){var t=e.entries,n=e.stopwatch,r=e.date,o=e.show,s=e.closeHandler,l=Object(a.useState)([]),d=Object(c.a)(l,2),u=d[0],h=d[1],j=Object(a.useState)([]),b=Object(c.a)(j,2),f=b[0],O=b[1],p=Object(a.useState)(!1),g=Object(c.a)(p,2),x=g[0],v=g[1],y=Object(a.useState)(null),w=Object(c.a)(y,2),C=w[0],k=w[1],S=Object(a.useContext)(ae.a),_=Object(a.useState)([]),E=Object(c.a)(_,2),M=E[0],D=E[1],T=Object(a.useContext)(m.a);Object(a.useEffect)((function(){if(!t.length)return h([]),void D([]);var e=function(e,t,n,c){var a=[],r=c.getTime(),o=new Date(e[0].year,e[0].month,e[0].day+1,0,0,-1).getTime(),i=null,s=0,l=r,d=0;e.forEach((function(e,r){if(r%2){a.pop();var o=e.timestamp-i.timestamp;s+=o;var u={timestamp:i.timestamp,id:i.entryId,limit:l},h={timestamp:e.timestamp,id:e.entryId,limit:null};l=h.timestamp;var j={stopwatchId:t,from:u,to:h,subTotal:o,total:s,index:d};a.push(j)}if(!(r%2)){if(i=e,d++,c.getTime()===n.getTime()){var b={stopwatchId:t,from:{timestamp:e.timestamp,id:e.entryId,limit:0},to:{timestamp:0,id:"",limit:0},subTotal:0,total:0,index:d};a.push(b)}if(c.getTime()!==n.getTime()){var m=new Date(c.getFullYear(),c.getMonth(),c.getDate()+1,0,0,-1).getTime(),f={stopwatchId:t,from:{timestamp:e.timestamp,id:e.entryId,limit:c.getTime()},to:{timestamp:m,id:"",limit:m},subTotal:m-e.timestamp,total:s+m-e.timestamp,index:d};a.push(f)}}}));var u=a.reverse(),h=o;return u.forEach((function(e){e.to&&(e.to.limit=h),h=e.from.timestamp})),u}(t,n.id,S,r);h(e),D(e.map((function(t,n){return t.to.timestamp?{id:e.length-n,from:ne(t.from.timestamp),to:ne(t.to.timestamp),subTotal:te(t.subTotal),total:te(t.total)}:{id:e.length-n,from:ne(t.from.timestamp),to:"now",subTotal:"--:--:--",total:"--:--:--"}})))}),[t,n,S,r]);return Object(Y.jsxs)(i.a,{size:"xl",show:o,onHide:s,children:[Object(Y.jsx)(i.a.Header,{children:Object(Y.jsx)(me,{entries:t,stopwatch:n,date:r})}),Object(Y.jsx)(i.a.Body,{children:Object(Y.jsxs)("div",{className:ie.a.Entries,children:[Object(Y.jsxs)(H.a,{variant:"text",color:"primary",children:[Object(Y.jsx)(R.a,{disabled:1!==f.length,onClick:function(){var e=u.length-f[0],t=[];t.push(u[e].from.id),u[e].to.id&&t.push(u[e].to.id);var n=re.b.batch();t.forEach((function(e){var t=T.collection("entries").doc(e);n.delete(t)})),n.commit().then((function(){console.log("deleted"),O([])})).catch((function(e){return console.log(e)}))},children:"Delete"}),Object(Y.jsx)(R.a,{disabled:1!==f.length,onClick:function(){var e=u.length-f[0];k(u[e]),v(!0)},children:"Edit"}),Object(Y.jsx)(R.a,{onClick:function(){if(!u[0]||0!==u[0].to.timestamp){var e=new Date(r.getFullYear(),r.getMonth(),r.getDate()).getTime(),t=r.getTime()!==S.getTime()?new Date(r.getFullYear(),r.getMonth(),r.getDate()+1).getTime():Date.now(),c=u[0]?u[0].to.timestamp:e,a={stopwatchId:n.id,from:{timestamp:c,id:"",limit:c},to:{timestamp:c,id:"",limit:t},subTotal:0,total:0,index:0};k(a),v(!0)}},disabled:!!u[0]&&0===u[0].to.timestamp,children:"New Entry"})]}),Object(Y.jsx)(fe.a,{rows:M,rowHeight:30,columns:[{field:"id",headerName:"Index",width:30,sortable:!1,filterable:!1},{field:"from",headerName:"From",width:100,editable:!0,sortable:!1,filterable:!1},{field:"to",headerName:"To",width:100,editable:!0,sortable:!1,filterable:!1},{field:"subTotal",headerName:"Sub-Total",width:120,editable:!1,sortable:!1,filterable:!1},{field:"total",headerName:"Total",width:100,editable:!1,sortable:!1,filterable:!1}],pageSize:6,rowsPerPageOptions:[6],checkboxSelection:!0,onSelectionModelChange:function(e){O(e)},selectionModel:f,headerHeight:40}),Object(Y.jsx)(Ce,{show:x,entry:C,closeHandler:function(){v(!1)},newEntryHandler:function(e){T.collection("entries").add({timestamp:e,trackerId:n.id,year:r.getFullYear(),month:r.getMonth(),day:r.getDate(),type:"stopwatchEntry"}).then((function(){})).catch((function(e){return console.log(e)}))},editHandler:function(e){console.log(e),e.commit().then((function(){console.log("we did it!"),v(!1)})).catch((function(e){e&&console.log("try again",e)}))}})]})})]})})),Se=n(212),_e=n(38),Ee=Object(_e.b)((function(e){return{user:e.user}}))((function(e){var t=Object(a.useState)(!1),n=Object(c.a)(t,2),r=n[0],o=n[1],i=Object(a.useState)(0),s=Object(c.a)(i,2),l=s[0],d=s[1],u=Object(a.useState)(!1),h=Object(c.a)(u,2),j=h[0],b=h[1],f=Object(a.useState)(Date.now()),O=Object(c.a)(f,2),p=O[0],g=O[1],x=Object(a.useContext)(ae.a),v=Object(a.useContext)(m.a),y=Object(a.useState)([]),w=Object(c.a)(y,2),C=w[0],k=w[1];Object(a.useEffect)((function(){k([]),b(!1),d(0),console.log(v,e.user);var t=Object(Se.a)(v,"entries"),n=Object(Se.d)(t,Object(Se.e)("trackerId","==",e.stopwatch.id),Object(Se.e)("year","==",e.date.getFullYear()),Object(Se.e)("month","==",e.date.getMonth()),Object(Se.e)("day","==",e.date.getDate()),Object(Se.c)("timestamp","asc"));return Object(Se.b)(n,(function(e){var t=[];e.forEach((function(e){var n=e.data(),c={timestamp:n.timestamp,trackerId:n.trackerId,entryId:e.id,year:n.year,month:n.month,day:n.day,type:"stopwatchEntry"};t.push(c)})),k(t)}))}),[v,e.date,e.stopwatch.id,e.user]),Object(a.useEffect)((function(){if(!C.length)return b(!1),void d(0);var t=!(C.length%2);b(!t);var n=C.map((function(e){return e.timestamp}));if(!t){if(e.date.getTime()===x.getTime()){var c=n.pop();g(c)}e.date.getTime()!==x.getTime()&&(b(!1),n.push(new Date(e.date.getFullYear(),e.date.getMonth(),e.date.getDate()+1,0,0,-1).getTime()))}var a=0;n.forEach((function(e,t){t%2?a+=e:a-=e})),d(a)}),[C,e.date,x]);return Object(Y.jsxs)("div",{onClick:function(t){t.target.closest(".main-button")||e.selector(e.stopwatch.id)},className:_.a.Stopwatch,style:{borderRightColor:e.isSelected?e.stopwatch.color:"rgb(128, 128, 128)",borderTopColor:e.isSelected?e.stopwatch.color:"rgb(128, 128, 128)",borderBottomColor:e.isSelected?e.stopwatch.color:"rgb(128, 128, 128)",borderLeftColor:e.stopwatch.color},children:[Object(Y.jsxs)("div",{className:_.a.Content,children:[Object(Y.jsx)("button",{className:"".concat(_.a.MainButton,"     main-button"),onClick:function(){var t=Date.now();v.collection("entries").add({timestamp:t,trackerId:e.stopwatch.id,year:x.getFullYear(),month:x.getMonth(),day:x.getDate(),type:"stopwatchEntry"}).then((function(){})).catch((function(e){return console.log(e)}))},disabled:e.date.getTime()!==x.getTime(),children:Object(Y.jsx)("svg",{width:"50",height:"50",fill:"currentColor",children:Object(Y.jsx)("use",{href:"".concat(N.a,"#").concat(j?"pause":"play","-circle")})})}),Object(Y.jsx)("h5",{children:e.stopwatch.name}),Object(Y.jsx)(ce,{isRunning:j,accum:l,lastEntry:p}),Object(Y.jsx)("button",{onClick:function(){return o(!r)},className:"".concat(_.a.ExpandButton,"     nothing"),children:Object(Y.jsx)("svg",{width:"24",height:"24",fill:"currentColor",children:Object(Y.jsx)("use",{href:"".concat(N.a,"#list-ul")})})})]}),Object(Y.jsx)(ke,{show:r,entries:C,stopwatch:e.stopwatch,date:e.date,closeHandler:function(){return o(!1)}})]})})),Me=Object(_e.b)((function(e){return{user:e.user}}))((function(e){var t=Object(a.useState)(0),n=Object(c.a)(t,2),r=n[0],o=n[1],i=Object(a.useContext)(m.a),s=Object(a.useState)(null),l=Object(c.a)(s,2),d=l[0],u=l[1];Object(a.useEffect)((function(){u(null),o(0);var t=Object(Se.a)(i,"entries"),n=Object(Se.d)(t,Object(Se.e)("trackerId","==",e.rater.id),Object(Se.e)("year","==",e.date.getFullYear()),Object(Se.e)("month","==",e.date.getMonth()),Object(Se.e)("day","==",e.date.getDate()),Object(Se.c)("timestamp","asc"));return Object(Se.b)(n,(function(e){e.forEach((function(e){var t=e.data(),n={timestamp:t.timestamp,value:t.value,trackerId:t.trackerId,entryId:e.id,year:t.year,month:t.month,day:t.day,type:"raterEntry"};u(n),o(n.value)}))}))}),[i,e.date,e.rater.id,e.user]);return Object(Y.jsx)("div",{onClick:function(t){t.target.closest(".main-button")||e.selector(e.rater.id)},style:{borderRightColor:e.isSelected?e.rater.color:"rgb(128, 128, 128)",borderTopColor:e.isSelected?e.rater.color:"rgb(128, 128, 128)",borderBottomColor:e.isSelected?e.rater.color:"rgb(128, 128, 128)",borderLeftColor:e.rater.color},className:M.a.Rater,children:Object(Y.jsxs)("div",{className:M.a.Content,children:[Object(Y.jsx)("h5",{children:e.rater.name}),Object(Y.jsx)(I.a,{className:M.a.Rating,name:e.rater.id,value:r,onChange:function(t,n){var c=Date.now();d||i.collection("entries").add({value:n,timestamp:c,trackerId:e.rater.id,year:e.date.getFullYear(),month:e.date.getMonth(),day:e.date.getDate(),type:"raterEntry"}).then((function(){})).catch((function(e){return console.log(e)})),d&&i.collection("entries").doc(d.entryId).update({value:n}).then((function(){})).catch((function(e){return console.log(e)}))},size:"large",precision:.5})]})})})),De=n(462),Te=n.n(De),Ne=Object(_e.b)((function(e){return{user:e.user}}))((function(e){var t=Object(a.useState)(!1),n=Object(c.a)(t,2),r=n[0],o=n[1],i=Object(a.useContext)(m.a),s=Object(a.useState)(null),l=Object(c.a)(s,2),d=l[0],u=l[1];Object(a.useEffect)((function(){u(null),o(!1);var t=Object(Se.a)(i,"entries"),n=Object(Se.d)(t,Object(Se.e)("trackerId","==",e.checker.id),Object(Se.e)("year","==",e.date.getFullYear()),Object(Se.e)("month","==",e.date.getMonth()),Object(Se.e)("day","==",e.date.getDate()),Object(Se.c)("timestamp","asc"));return Object(Se.b)(n,(function(e){e.forEach((function(e){var t=e.data(),n={timestamp:t.timestamp,trackerId:t.trackerId,entryId:e.id,year:t.year,month:t.month,day:t.day,type:"checkerEntry",checked:t.checked};u(n),o(t.checked)}))}))}),[i,e.date,e.checker.id,e.user]);return Object(Y.jsx)("div",{onClick:function(t){t.target.closest(".main-button")||e.selector(e.checker.id)},className:Te.a.Checker,style:{borderRightColor:e.isSelected?e.checker.color:"rgb(128, 128, 128)",borderTopColor:e.isSelected?e.checker.color:"rgb(128, 128, 128)",borderBottomColor:e.isSelected?e.checker.color:"rgb(128, 128, 128)",borderLeftColor:e.checker.color},children:Object(Y.jsxs)("div",{className:Te.a.Content,children:[Object(Y.jsx)("h5",{children:e.checker.name}),Object(Y.jsx)(F.a,{checked:r,onChange:function(){var t=Date.now(),n=!r;d||i.collection("entries").add({timestamp:t,trackerId:e.checker.id,year:e.date.getFullYear(),month:e.date.getMonth(),day:e.date.getDate(),type:"checkerEntry",checked:n}).then((function(){})).catch((function(e){return console.log(e)})),d&&i.collection("entries").doc(d.entryId).update({checked:n}).then((function(){})).catch((function(e){return console.log(e)}))},className:"main-button",color:"primary"})]})})})),Ie=Object(_e.b)((function(e){return{user:e.user}}))((function(e){var t=Object(a.useState)(0),n=Object(c.a)(t,2),r=n[0],o=n[1],i=Object(a.useContext)(m.a),s=Object(a.useState)(null),l=Object(c.a)(s,2),d=l[0],u=l[1];Object(a.useEffect)((function(){o(0),u(null);var t=Object(Se.a)(i,"entries"),n=Object(Se.d)(t,Object(Se.e)("trackerId","==",e.counter.id),Object(Se.e)("year","==",e.date.getFullYear()),Object(Se.e)("month","==",e.date.getMonth()),Object(Se.e)("day","==",e.date.getDate()),Object(Se.c)("timestamp","asc"));return Object(Se.b)(n,(function(e){e.forEach((function(e){var t=e.data(),n={count:t.count,timestamp:t.timestamp,trackerId:t.trackerId,entryId:e.id,year:t.year,month:t.month,day:t.day,type:"counterEntry"};o(t.count),u(n)}))}))}),[i,e.date,e.counter.id,e.user]);var h=function(t){var n;n=!!t.target.closest(".plus")?r+e.counter.size:r-e.counter.size<0?0:r-e.counter.size;var c=Date.now();d||i.collection("entries").add({count:n,timestamp:c,trackerId:e.counter.id,year:e.date.getFullYear(),month:e.date.getMonth(),day:e.date.getDate(),type:"counterEntry"}).then((function(){})).catch((function(e){return console.log(e)})),d&&i.collection("entries").doc(d.entryId).update({count:n}).then((function(){})).catch((function(e){return console.log(e)}))};return Object(Y.jsx)("div",{onClick:function(t){t.target.closest(".main-button")||e.selector(e.counter.id)},className:T.a.Counter,style:{borderRightColor:e.isSelected?e.counter.color:"rgb(128, 128, 128)",borderTopColor:e.isSelected?e.counter.color:"rgb(128, 128, 128)",borderBottomColor:e.isSelected?e.counter.color:"rgb(128, 128, 128)",borderLeftColor:e.counter.color},children:Object(Y.jsxs)("div",{className:T.a.Content,children:[Object(Y.jsx)("h5",{children:e.counter.name}),Object(Y.jsxs)(H.a,{className:T.a.Buttons,color:"primary",children:[Object(Y.jsx)(R.a,{className:"main-button   plus",onClick:h,children:Object(Y.jsx)("svg",{width:"20",height:"20",fill:"currentColor",children:Object(Y.jsx)("use",{href:"".concat(N.a,"#plus")})})}),Object(Y.jsx)(R.a,{className:"main-button",color:"primary",children:r}),Object(Y.jsx)(R.a,{className:"main-button   minus",onClick:h,disabled:0===r,children:Object(Y.jsx)("svg",{width:"20",height:"20",fill:"currentColor",children:Object(Y.jsx)("use",{href:"".concat(N.a,"#dash")})})})]})]})})})),Fe=n(463),He=n.n(Fe),Re=n(159),Ye=n(179),ze=r.a.memo((function(e){var t=e.stopwatches,n=e.raters,r=e.checkers,i=e.counters,s=Object(a.useState)(!1),l=Object(c.a)(s,2),d=l[0],u=l[1],h=Object(a.useState)(!1),j=Object(c.a)(h,2),b=j[0],f=j[1],g=Object(a.useContext)(ae.a),x=Object(a.useState)(null),v=Object(c.a)(x,2),y=v[0],w=v[1],C=Object(a.useState)(!1),k=Object(c.a)(C,2),S=k[0],_=k[1],E=Object(a.useState)(""),M=Object(c.a)(E,2),D=M[0],T=M[1],N=Object(a.useState)(null),I=Object(c.a)(N,2),F=I[0],H=I[1],z=Object(a.useState)(g),B=Object(c.a)(z,2),L=B[0],P=B[1],V=Object(a.useContext)(m.a);Object(a.useEffect)((function(){g&&P(g)}),[g]);var W=function(e){var t=e.target.outerText.toLowerCase();_(!1),T(t),H(null),u(!0)},G=function(e){if(e!==(null===F||void 0===F?void 0:F.id)){var c=[].concat(Object(o.a)(t),Object(o.a)(i),Object(o.a)(n),Object(o.a)(r)).filter((function(t){return t.id===e}))[0];H(c),T(c.type)}else H(null)};return Object(Y.jsxs)(ue.a,{children:[Object(Y.jsxs)("div",{className:ee.a.ControlPanel,children:[Object(Y.jsx)(R.a,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){w(e.currentTarget),_(!0)},children:"New"}),Object(Y.jsxs)(Re.a,{id:"simple-menu",anchorEl:y,keepMounted:!0,open:S,onClose:function(){return _(!1)},children:[Object(Y.jsx)(Ye.a,{onClick:W,children:"Stopwatch"}),Object(Y.jsx)(Ye.a,{onClick:W,children:"Checker"}),Object(Y.jsx)(Ye.a,{onClick:W,children:"Rater"}),Object(Y.jsx)(Ye.a,{onClick:W,children:"Counter"})]}),Object(Y.jsx)(R.a,{onClick:function(){u(!0)},disabled:!F,children:"Edit"}),Object(Y.jsx)(R.a,{onClick:function(){!function(e,t){e.collection("trackers").doc(t.id).delete().then((function(){e.collection("entries").where("trackerId","==",t.id).get().then((function(t){var n=[];t.forEach((function(e){n.push(e.id)})),console.log(n),function(){var t=Object(p.a)(O.a.mark((function t(){var c,a;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=[],n.forEach((function(t){var n=e.collection("entries").doc(t).delete();c.push(n)})),t.next=4,Promise.all(c);case 4:return a=t.sent,t.abrupt("return",a);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()().then((function(){})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))}(V,F),H(null)},disabled:!F,children:"Delete"}),Object(Y.jsx)(He.a,{maxDate:g,value:L,locale:"en-EN",onChange:P,clearIcon:null})]}),Object(Y.jsxs)("div",{className:ee.a.Trackers,children:[t.map((function(e){return Object(Y.jsx)(Ee,{stopwatch:e,date:L,selector:G,isSelected:(null===F||void 0===F?void 0:F.id)===e.id},e.id)})),n.map((function(e){return Object(Y.jsx)(Me,{isSelected:(null===F||void 0===F?void 0:F.id)===e.id,rater:e,selector:G,date:L},e.id)})),r.map((function(e){return Object(Y.jsx)(Ne,{selector:G,isSelected:(null===F||void 0===F?void 0:F.id)===e.id,checker:e,date:L},e.id)})),i.map((function(e){return Object(Y.jsx)(Ie,{selector:G,isSelected:(null===F||void 0===F?void 0:F.id)===e.id,counter:e,date:L},e.id)})),Object(Y.jsx)(A,{selected:F,show:d,closeHandler:function(){u(!1)},type:D}),Object(Y.jsx)(Q,{show:b,closeHandler:function(){return f(!1)},checkers:r,raters:n})]})]})})),Be=n(476),Ae=n.n(Be),Le=n(477),Pe=n.n(Le),Ve=n(478),We=n.n(Ve),Ge=r.a.memo((function(e){var t=e.color,n=e.name,c=e.selectHandler,a=e.id,r=e.selected;return Object(Y.jsxs)("button",{onClick:function(){return c(a)},className:We.a.Label,children:[Object(Y.jsx)("div",{style:{backgroundColor:r?t:"transparent",borderColor:t}}),Object(Y.jsx)("p",{children:n})]})})),Xe=r.a.memo((function(e){var t=e.checkers,n=e.raters,r=e.stopwatches,o=e.handler,i=e.selectedTrackers,s=e.counters,l=Object(a.useState)(["raters"]),d=Object(c.a)(l,2),u=d[0],h=d[1];return Object(Y.jsx)("div",{className:Pe.a.TrackerSelector,children:Object(Y.jsxs)(V.a,{defaultCollapseIcon:Object(Y.jsx)("svg",{width:"20",height:"20",fill:"currentColor",children:Object(Y.jsx)("use",{href:"".concat(N.a,"#chevron-up")})}),defaultExpandIcon:Object(Y.jsx)("svg",{width:"20",height:"20",fill:"currentColor",children:Object(Y.jsx)("use",{href:"".concat(N.a,"#chevron-down")})}),expanded:u,selected:i.map((function(e){return e.id})),onNodeToggle:function(e,t){h(t)},onNodeSelect:function(e,t){o(t)},children:[Object(Y.jsxs)(W.a,{nodeId:"raters",label:"Raters",children:[n.map((function(e){return Object(Y.jsx)(Ge,{color:e.color,name:e.name,id:e.id,selected:i.map((function(e){return e.id})).includes(e.id),selectHandler:o},e.id)})),n.length?null:Object(Y.jsx)("p",{children:"no raters yet..."})]}),Object(Y.jsxs)(W.a,{nodeId:"stopwatches",label:"Stopwatches",children:[r.map((function(e){return Object(Y.jsx)(Ge,{color:e.color,name:e.name,id:e.id,selected:i.map((function(e){return e.id})).includes(e.id),selectHandler:o},e.id)})),r.length?null:Object(Y.jsx)("p",{children:"no stopwatches yet..."})]}),Object(Y.jsxs)(W.a,{nodeId:"checkers",label:"Checkers",children:[t.map((function(e){return Object(Y.jsx)(Ge,{color:e.color,name:e.name,id:e.id,selected:i.map((function(e){return e.id})).includes(e.id),selectHandler:o},e.id)})),t.length?null:Object(Y.jsx)("p",{children:"no checkers yet..."})]}),Object(Y.jsxs)(W.a,{nodeId:"counters",label:"Counters",children:[s.map((function(e){return Object(Y.jsx)(Ge,{color:e.color,name:e.name,id:e.id,selected:i.map((function(e){return e.id})).includes(e.id),selectHandler:o},e.id)})),s.length?null:Object(Y.jsx)("p",{children:"no counters yet..."})]})]})})})),Ze=n(479),Je=n.n(Ze),qe=n(480),Ke=n.n(qe),Ue=r.a.memo((function(e){var t=e.dateRange,n=e.setDateRange,c=e.todaysDate;return Object(Y.jsx)("div",{className:Je.a.Selector,style:{zIndex:1e4},children:Object(Y.jsx)(Ke.a,{value:t,maxDate:c,locale:"en-EN",onChange:n,clearIcon:null,className:Je.a.Calender})})})),Qe=n(484),$e=n.n(Qe),et=r.a.memo((function(e){var t=e.labels,n=e.datasets,c=e.options,r=Object(a.useRef)(null),o=Object(a.useCallback)((function(e){if(e){var t=e.getContext("2d");t&&(r.current=new de.a(t,{type:"bar",data:{datasets:[]}}))}}),[]);return Object(a.useEffect)((function(){r.current&&(r.current.data={labels:t,datasets:n},r.current.options=c,r.current.update())}),[n,t,c]),Object(Y.jsx)(ue.a,{children:Object(Y.jsx)("div",{className:$e.a.BarChart,children:Object(Y.jsx)("canvas",{ref:o})})})})),tt=n(485),nt=r.a.memo((function(e){var t=e.stopwatches,n=e.selectedTrackers,r=e.stopwatchEntries,o=e.raters,i=e.raterEntries,s=e.dateStrings,l=e.checkers,d=e.counters,u=e.counterEntries,h=e.checkerEntries,j=Object(a.useState)([]),b=Object(c.a)(j,2),m=b[0],f=b[1],O=Object(a.useState)({}),p=Object(c.a)(O,2),g=p[0],x=p[1],v=Object(a.useContext)(ae.a);return Object(a.useEffect)((function(){var e={elements:{point:{radius:1}},interaction:{mode:"index",intersect:!1},stacked:!1,scales:{y:{type:"linear",display:!1,position:"left",title:{display:!1}},y1:{suggestedMax:5,ticks:{stepSize:1},type:"linear",display:!0,position:"right",title:{display:!0,text:"Rating"},grid:{drawOnChartArea:!0}}},plugins:{tooltip:{enabled:!1,displayColors:!1},legend:{display:!1}}};if(!n.length)return f([{data:[0,0,0,0,0,0,0],backgroundColor:"black",borderColor:"black",type:"bar",stepped:!1,order:1,yAxisID:"y",tension:1}]),void x(e);var c=[];t.forEach((function(t){if(n.map((function(e){return e.id})).includes(t.id)){e.scales.y.display=!0,e.scales.y.suggestedMax=4,e.scales.y.title={display:!0,text:"Hours"},e.scales.y1.grid.drawOnChartArea=!1;var a=[];r.forEach((function(e){var n=e.filter((function(e){return e.trackerId===t.id}));if(n.length%2){var c=n[n.length-1],r=new Date(c.year,c.month,c.day).getTime()===v.getTime();if(!r){var o=function(e){var t=new Date(e.year,e.month,e.day+1,0,0,-1).getTime();return Object(Oe.a)(Object(Oe.a)({},e),{},{timestamp:t})}(c);n.push(o)}r&&n.push(Object(Oe.a)(Object(Oe.a)({},c),{},{timestamp:Date.now()}))}var i=0;n.forEach((function(e,t){t%2===0?i-=e.timestamp:i+=e.timestamp}));var s=i/36e5;a.unshift(s)}));var o={data:a,backgroundColor:t.color,borderColor:t.color,type:"bar",stepped:!1,order:1,yAxisID:"y",tension:1};c.push(o)}})),o.forEach((function(e){if(n.map((function(e){return e.id})).includes(e.id)){var t=[];i.forEach((function(n){var c,a=n.filter((function(t){return t.trackerId===e.id})),r=null===(c=a[a.length-1])||void 0===c?void 0:c.value;t.unshift(r||null)}));var a={data:t,backgroundColor:e.color,borderColor:e.color,type:"line",stepped:!1,order:0,yAxisID:"y1",tension:.4};c.push(a)}})),l.forEach((function(t){if(n.map((function(e){return e.id})).includes(t.id)){e.scales.y.display=!1,e.scales.y1.grid.drawOnChartArea=!0;var a=[];h.forEach((function(e){var n=e.filter((function(e){return e.trackerId===t.id}))[0];a.unshift((null===n||void 0===n?void 0:n.checked)?1:0)}));var r=Object(tt.a)(t.color),o="rgba(".concat(r.red,", ").concat(r.green,", ").concat(r.blue,", 0.6)"),i={data:a,backgroundColor:o,borderColor:t.color,type:"bar",stepped:!1,order:1,yAxisID:"y",tension:1};c.push(i)}})),d.forEach((function(t){if(e.scales.y.display=!0,n.map((function(e){return e.id})).includes(t.id)){e.scales.y.suggestedMax=t.size,e.scales.y.title.text="Count",e.scales.y1.grid.drawOnChartArea=!1;var a=[];u.forEach((function(e){var n=e.filter((function(e){return e.trackerId===t.id}))[0],c=null===n||void 0===n?void 0:n.count;a.unshift(c||0)}));var r={data:a,backgroundColor:t.color,borderColor:t.color,type:"bar",stepped:!1,order:1,yAxisID:"y",tension:1};c.push(r)}})),f(c),x(e)}),[r,n,t,i,o,l,h,d,u,v]),Object(Y.jsx)("div",{style:{display:"flex",flexFlow:"column"},children:Object(Y.jsx)(et,{datasets:m,labels:s,options:g})})})),ct=(n(263),r.a.memo((function(e){var t=e.stopwatches,n=e.checkers,r=e.raters,o=e.selectedTrackers,i=e.dateRange,s=e.counters,l=Object(a.useState)(new Map),d=Object(c.a)(l,2),u=d[0],h=d[1],j=Object(a.useState)(new Map),b=Object(c.a)(j,2),f=b[0],O=b[1],p=Object(a.useState)(new Map),g=Object(c.a)(p,2),x=g[0],v=g[1],y=Object(a.useState)(new Map),w=Object(c.a)(y,2),C=w[0],k=w[1],S=Object(a.useState)([]),_=Object(c.a)(S,2),E=_[0],M=_[1],D=Object(a.useState)({display:!0,disabled:!1}),T=Object(c.a)(D,2),N=T[0],I=(T[1],Object(a.useState)({display:!1,disabled:!0})),F=Object(c.a)(I,2),H=F[0],R=F[1],z=Object(a.useState)({display:!1,disabled:!0}),B=(Object(c.a)(z,1)[0],Object(a.useContext)(m.a)),A=Object(a.useContext)(ae.a);return console.log("rendering chart selector"),Object(a.useEffect)((function(){var e=i[0].getTime(),t=i[1].getTime();R(e+864e5>t?{display:!0,disabled:!1}:{display:!1,disabled:!0})}),[i]),Object(a.useEffect)((function(){var e=function(e){for(var t=[],n=e[1].getFullYear(),c=e[1].getMonth(),a=(e[1].getTime()-e[0].getTime())/864e5,r=0;r<Math.round(a);r++){var o=e[1].getDate()-r,i=new Date(n,c,o),s=i.getDate(),l=i.getMonth(),d=i.getFullYear();t.push({year:d,month:l,day:s})}return t}(i),t=e.map((function(e){return"".concat(e.day,"/").concat(e.month+1)}));M(t.reverse());var n=new Map,c=new Map,a=new Map,r=new Map;(function(e,t){return pe.apply(this,arguments)})(B,e).then((function(e){e.forEach((function(e,o){var i=[],s=[],l=[],d=[];e.forEach((function(e){var t=e.data();switch(t.type){case"stopwatchEntry":i.push(t);break;case"raterEntry":s.push(t);break;case"counterEntry":d.push(t);break;default:l.push(t)}})),n.set(t[o],i),c.set(t[o],s),a.set(t[o],l),r.set(t[o],d)})),h(n),v(c),O(a),k(r)}))}),[A,B,i]),Object(Y.jsxs)("div",{style:{marginLeft:"4px"},children:[N.display?Object(Y.jsx)(nt,{stopwatchEntries:u,checkerEntries:f,raterEntries:x,counterEntries:C,stopwatches:t,raters:r,checkers:n,counters:s,selectedTrackers:o,dateStrings:E}):null,(H.display,null)]})}))),at=r.a.memo((function(e){var t=e.stopwatches,n=e.raters,r=e.checkers,i=e.counters,s=Object(a.useContext)(ae.a),l=Object(a.useState)("left"),d=Object(c.a)(l,2),u=d[0],h=d[1],j=Object(a.useState)([]),b=Object(c.a)(j,2),m=b[0],f=b[1];Object(a.useEffect)((function(){t.length&&n.length&&f([n[0],t[0]])}),[t,n]);var O=Object(a.useState)([new Date,new Date]),p=Object(c.a)(O,2),g=p[0],x=p[1];console.log("rendering DataPanel");Object(a.useEffect)((function(){s&&x([new Date(s.getFullYear(),s.getMonth(),s.getDate()-7),new Date(s.getFullYear(),s.getMonth(),s.getDate())])}),[s]);return Object(Y.jsx)("div",{className:Ae.a.DataPanel,children:Object(Y.jsxs)("div",{className:Ae.a.Chart,style:{transform:"translateX(-".concat("left"===u?"0":"186","px)")},children:[Object(Y.jsx)(Xe,{raters:n,stopwatches:t,checkers:r,counters:i,handler:function(e){var c=!1,a=[],s=[].concat(Object(o.a)(t),Object(o.a)(n),Object(o.a)(r),Object(o.a)(i)).filter((function(t){return e===t.id}))[0];s&&(m.forEach((function(t){t.id===e&&(c=!0)})),c&&(a=m.filter((function(t){return t.id!==e}))),c||(a=[].concat(Object(o.a)(m),[s]),"stopwatch"===s.type&&(a=a.filter((function(e){return"checker"!==e.type&&"counter"!==e.type}))),"checker"===s.type&&(a=a.filter((function(e){return"stopwatch"!==e.type&&"counter"!==e.type}))),"counter"===s.type&&(a=a.filter((function(e){return"stopwatch"!==e.type&&"checker"!==e.type})))),f(a))},selectedTrackers:m}),Object(Y.jsx)("div",{onClick:function(){h("left"===u?"right":"left")},className:Ae.a.Divider,children:Object(Y.jsx)("svg",{width:"17",height:"17",fill:"currentColor",children:Object(Y.jsx)("use",{href:"".concat(N.a,"#chevron-compact-").concat(u)})})}),Object(Y.jsxs)("div",{children:[Object(Y.jsx)(Ue,{todaysDate:s,dateRange:g,setDateRange:x}),Object(Y.jsx)(ct,{dateRange:g,stopwatches:t,selectedTrackers:m,raters:n,checkers:r,counters:i})]})]})})})),rt=r.a.memo((function(e){var t=e.stopwatches,n=e.raters,r=e.checkers,o=e.counters,i=Object(a.useContext)(ae.a),s=Object(a.useContext)(m.a),l=Object(a.useState)(!1),d=Object(c.a)(l,2),u=d[0],h=d[1];return Object(a.useEffect)((function(){"3Y554SVOZxYagcpu9lTkeiWesKC3"===(null===s||void 0===s?void 0:s.id)&&s.collection("entries").where("year","==",i.getFullYear()).where("month","==",i.getMonth()).where("day","==",i.getDate()-1).onSnapshot((function(e){h(e.empty)}))}),[i,s]),Object(a.useEffect)((function(){u&&(console.log("new data for today"),t.forEach((function(e){console.log("!!!!!!!!!1");for(var t=2*(1+Math.trunc(4*Math.random())),n=new Date(i.getFullYear(),i.getMonth(),i.getDate()-1,8).getTime(),c=0;c<t;c++){n+=60*Math.trunc(3*Math.random())*60*1e3+60*Math.trunc(60*Math.random())*1e3+1e3*Math.trunc(60*Math.random());var a=new Date(n);s.collection("entries").add({timestamp:n,trackerId:e.id,year:a.getFullYear(),month:a.getMonth(),day:a.getDate(),type:"stopwatchEntry"}).then((function(){})).catch((function(e){return console.log(e)}))}})),n.forEach((function(e){var t=new Date(i.getFullYear(),i.getMonth(),i.getDate()-1,8+Math.trunc(14*Math.random()),Math.trunc(60*Math.random()),Math.trunc(60*Math.random()));s.collection("entries").add({timestamp:t.getTime(),trackerId:e.id,year:t.getFullYear(),month:t.getMonth(),day:t.getDate(),type:"raterEntry",value:2+3*Math.random()}).then((function(){})).catch((function(e){return console.log(e)}))})),o.forEach((function(e){var t=new Date(i.getFullYear(),i.getMonth(),i.getDate()-1,8+Math.trunc(14*Math.random()),Math.trunc(60*Math.random()),Math.trunc(60*Math.random()));s.collection("entries").add({timestamp:t.getTime(),trackerId:e.id,year:t.getFullYear(),month:t.getMonth(),day:t.getDate(),type:"counterEntry",count:Math.trunc(4*Math.random())*e.size}).then((function(){})).catch((function(e){return console.log(e)}))})),r.forEach((function(e){var t=new Date(i.getFullYear(),i.getMonth(),i.getDate()-1,8+Math.trunc(14*Math.random()),Math.trunc(60*Math.random()),Math.trunc(60*Math.random()));s.collection("entries").add({timestamp:t.getTime(),trackerId:e.id,year:t.getFullYear(),month:t.getMonth(),day:t.getDate(),type:"checkerEntry",checked:!!Math.round(Math.random())}).then((function(){})).catch((function(e){return console.log(e)}))})),h(!1))}),[t,i,s,n,o,r,u]),Object(Y.jsx)("div",{})})),ot=n(101),it=Object(_e.b)((function(e){return{user:e.user}}));t.default=it((function(e){var t=Object(a.useState)([]),n=Object(c.a)(t,2),r=n[0],o=n[1],i=Object(a.useState)([]),s=Object(c.a)(i,2),l=s[0],d=s[1],u=Object(a.useState)([]),h=Object(c.a)(u,2),j=h[0],b=h[1],f=Object(a.useState)([]),O=Object(c.a)(f,2),p=O[0],g=O[1],x=Object(a.useContext)(m.a),v=Object(a.useContext)(ae.a);Object(a.useEffect)((function(){if(x){var t=Object(Se.b)(Object(Se.a)(x,"trackers"),{},(function(e){var t=[],n=[],c=[],a=[];e.forEach((function(e){var r=e.data();switch(r.type){case"stopwatch":t.push(r);break;case"rater":n.push(r);break;case"counter":a.push(r);break;default:c.push(r)}})),o(t),b(c),d(n),g(a)}));return e.user||t(),t}}),[x,e.user]);var y=null,w=null,C=null;return v&&e.user&&(y=Object(Y.jsx)(at,{stopwatches:r,raters:l,checkers:j,counters:p}),w=Object(Y.jsx)(ze,{stopwatches:r,raters:l,checkers:j,counters:p}),C=Object(Y.jsx)(rt,{stopwatches:r,raters:l,checkers:j,counters:p})),Object(Y.jsxs)(ue.a,{children:[Object(Y.jsx)(ot.a,{show:!e.user,handleClose:function(){}}),y,w,C]})}))}}]);
//# sourceMappingURL=4.199fe12c.chunk.js.map