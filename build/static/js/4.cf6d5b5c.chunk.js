(this["webpackJsonpself-track"]=this["webpackJsonpself-track"]||[]).push([[4],{415:function(e,t,a){e.exports={Tracker:"Tracker_Tracker__3ovyp"}},429:function(e,t,a){"use strict";var c=a(9);t.a=function(){return Object(c.jsx)("div",{style:{width:"100%",height:"1px",backgroundImage:"linear-gradient(to right, white, grey, white)"}})}},437:function(e,t,a){e.exports={ExpandButton:"Stopwatch_ExpandButton__3TVfW",Content:"Stopwatch_Content__3seJN",Header:"Stopwatch_Header__3WRJs",MainButton:"Stopwatch_MainButton__Xtp0K"}},438:function(e,t,a){e.exports={Content:"Rater_Content__3fnIG",Header:"Rater_Header__2iJvZ",Rating:"Rater_Rating__fa4Sp"}},439:function(e,t,a){e.exports={CheckBox:"Checker_CheckBox__8GKH-",Content:"Checker_Content__34-M0",Header:"Checker_Header__2TFSU"}},440:function(e,t,a){e.exports={Content:"Counter_Content__3GsA1",Buttons:"Counter_Buttons__36Npi",Header:"Counter_Header__2uGCX"}},457:function(e,t,a){e.exports={Form:"TrackersForm_Form__3LHZx",ColorField:"TrackersForm_ColorField__17Ipo",Field:"TrackersForm_Field__2PJ_4",FloatingButton:"TrackersForm_FloatingButton__1LEwx"}},498:function(e,t,a){e.exports={CardHeader:"SurveyForm_CardHeader__3GZP2",List:"SurveyForm_List__3VN1A",Transfer:"SurveyForm_Transfer__NIDYV",Movers:"SurveyForm_Movers__ZnRYR"}},501:function(e,t,a){e.exports={Trackers:"Trackers_Trackers__1zNZe",Container:"Trackers_Container__2MFOo",Button:"Trackers_Button__2bkgx",Top:"Trackers_Top__3mxHc",DatePicker:"Trackers_DatePicker__2s6lh",ControlPanel:"Trackers_ControlPanel__2Ru5m"}},502:function(e,t,a){e.exports={Entries:"StopwatchEntries_Entries__trl9H",Header:"StopwatchEntries_Header__28woA",Body:"StopwatchEntries_Body__xnW4u",NewEntryButton:"StopwatchEntries_NewEntryButton__25tlb",Tablehead:"StopwatchEntries_Tablehead__1t_kg",ListItem:"StopwatchEntries_ListItem__3ni0F",Dropdown:"StopwatchEntries_Dropdown__24rx5"}},503:function(e,t,a){e.exports={BarChartPreAmp:"BarChartPreAmp_BarChartPreAmp__3-nTm"}},504:function(e,t,a){e.exports={BarChart:"BarChart_BarChart__3cQVs"}},505:function(e,t,a){e.exports={Field:"EntryEditForm_Field__3Tdcb",Limit:"EntryEditForm_Limit__3WxXf",Form:"EntryEditForm_Form__3lfW3"}},523:function(e,t,a){e.exports={NewUser:"NewUserGuide_NewUser__1XSJq",Form:"NewUserGuide_Form__2eogD",RadioOptions:"NewUserGuide_RadioOptions__rhdK-",Togglegroup:"NewUserGuide_Togglegroup__P68_d",Toggle:"NewUserGuide_Toggle__2OIWy",Card:"NewUserGuide_Card__hLH_e",Body:"NewUserGuide_Body__2-G1U",Options:"NewUserGuide_Options__2I-XX",Option:"NewUserGuide_Option__9BZwq",Recommended:"NewUserGuide_Recommended__3Y6Vn",Possible:"NewUserGuide_Possible__tUrF2",NotRec:"NewUserGuide_NotRec__3RVPV",ButtonPanel:"NewUserGuide_ButtonPanel__3wMOz",LeftButtons:"NewUserGuide_LeftButtons__2zdDO",Skip:"NewUserGuide_Skip__2vbYR",Next:"NewUserGuide_Next__2U9M7",Back:"NewUserGuide_Back__2ue_C",Header:"NewUserGuide_Header__gPSdm"}},524:function(e,t,a){e.exports={DataPanel:"DataPanel_DataPanel__2TvCl",Main:"DataPanel_Main__3mO9g",Chart:"DataPanel_Chart__2NxcX",main:"DataPanel_main__1bcgu"}},525:function(e,t,a){e.exports={TrackerSelector:"TrackerSelector_TrackerSelector__13Imw"}},526:function(e,t,a){e.exports={Label:"Label_Label__1Ou9W"}},527:function(e,t,a){e.exports={Selector:"RangeSelector_Selector__1o0hR",Calender:"RangeSelector_Calender__3YZIM"}},532:function(e,t,a){e.exports={BarChart:"BarLineChart_BarChart__UHoXd"}},579:function(e,t,a){"use strict";a.r(t);var c=a(18),n=a(1),r=a.n(n),o=a(25),s=a(39),i=a(33),l=a(46),d=a(87),u=a(457),j=a.n(u),b=a(537),h=a(176),m=a(95),O=a(404),f=a(123),p=a(9),x=r.a.memo((function(e){var t,a=Object(n.useState)("#000000"),r=Object(c.a)(a,2),o=r[0],s=r[1],i=Object(n.useContext)(h.a);Object(n.useEffect)((function(){e.selected&&s(e.selected.color)}),[e.selected]);var u=Object(d.d)({initialValues:{name:e.selected?e.selected.name:"",description:e.selected?e.selected.description:"",size:(null===(t=e.selected)||void 0===t?void 0:t.size)?e.selected.size.toString():"1"},validationSchema:l.b({name:l.d().max(20,"Name is too long").required("Must have a name"),description:l.d(),size:l.a().positive("Must be a possitive number").required("")}),onSubmit:function(t){console.log(t),e.attemptSubmition(),e.selected||(console.log("creating"),e.createNewTracker(i,e.type,t.name,t.description,o,t.size)),e.selected&&Object(m.g)(i,e.selected.id,t.name,t.description,o,t.size),x()}}),x=function(){s("#000000"),e.onFinish()},g=Object(p.jsxs)("form",{className:j.a.Form,onSubmit:u.handleSubmit,children:[Object(p.jsx)("div",{className:j.a.Field,children:Object(p.jsx)(O.a,{inputProps:{autoComplete:"new-password",form:{autoComplete:"off"}},id:"name",name:"name",label:Object(p.jsxs)("p",{children:["Name ",Object(p.jsx)("small",{children:" (required)"})]}),variant:"outlined",placeholder:"e.g Watching T.V...",value:u.values.name,onChange:u.handleChange,error:u.touched.name&&Boolean(u.errors.name),helperText:u.touched.name&&u.errors.name})}),Object(p.jsx)("div",{className:j.a.Field,children:Object(p.jsx)(O.a,{inputProps:{autoComplete:"new-password",form:{autoComplete:"off"}},id:"description",name:"description",multiline:!0,label:Object(p.jsxs)("p",{children:["Description",Object(p.jsx)("small",{children:" (optional)"})]}),variant:"outlined",maxRows:4,placeholder:"e.g The amount of time i spend on watching T.V...",value:u.values.description,onChange:u.handleChange,error:u.touched.description&&Boolean(u.errors.description),helperText:u.touched.description&&u.errors.description})}),Object(p.jsx)("div",{style:{display:"counter"===e.type?"unset":"none"},className:j.a.Field,children:Object(p.jsx)(O.a,{value:u.values.size,onChange:u.handleChange,id:"size",name:"size",type:"number",label:Object(p.jsxs)("p",{children:["Step size",Object(p.jsx)("small",{children:" (optional)"})]}),variant:"outlined",style:{width:"100px"},error:u.touched.size&&Boolean(u.errors.size),helperText:u.touched.size&&u.errors.size})}),Object(p.jsxs)("div",{className:j.a.ColorField,children:[Object(p.jsxs)("label",{children:["Color ",Object(p.jsx)("small",{children:" (required)"})]}),Object(p.jsx)(b.a,{onChangeComplete:function(e){s(e.hex)},color:o})]}),Object(p.jsx)("div",{className:j.a.Field,children:Object(p.jsx)("button",{disabled:"#000000"===o,type:"submit",className:j.a.FloatingButton,children:e.selected?"Save":"Create new Tracker"})})]});return"attempt"===e.submitionState&&(g=Object(p.jsx)(f.a,{})),g})),g={attemptSubmition:function(){return s.i("attempt")},createNewTracker:function(e,t,a,c,n,r){return s.a(e,t,a,c,n,r)}},v=Object(i.b)((function(e){return{submitionState:e.submitionState}}),g)(x),y=a(578),w=a(498),k=a.n(w),_=a(560),C=a(585),S=a(82),N=a(555),T=a(556),E=a(583),D=a(559),I=a(561),M=a(562),F=a(563),H=a(564),B=function(e,t){return e.filter((function(e){return!t.includes(e)}))},R=function(e,t){return e.filter((function(e){return t.includes(e)}))},P=r.a.memo((function(e){var t=e.show,a=e.closeHandler,r=e.checkers,s=e.raters,i=Object(n.useState)([]),l=Object(c.a)(i,2),d=l[0],u=l[1],j=Object(n.useState)([].concat(Object(o.a)(r),Object(o.a)(s))),b=Object(c.a)(j,2),m=b[0],f=b[1],x=Object(n.useState)([]),g=Object(c.a)(x,2),v=g[0],w=g[1],P=R(d,m),z=R(d,v),U=Object(n.useState)(["raters","checkers"]),G=Object(c.a)(U,2),Y=G[0],L=G[1],A=Object(n.useState)(""),V=Object(c.a)(A,2),W=V[0],X=V[1],q=Object(n.useContext)(h.a),J=function(){a()},Z=function(e){return function(){var t=d.indexOf(e),a=Object(o.a)(d);-1===t?a.push(e):a.splice(t,1),u(a)}},K=function(e){return R(d,e).length},Q=function(e){return function(){var t,a;K(e)===e.length?u(B(d,e)):u((t=d,a=e,[].concat(Object(o.a)(t),Object(o.a)(B(a,t)))))}},$=function(e,t){L(t)},ee=function(e,t){return Object(p.jsxs)(N.a,{children:[Object(p.jsx)(T.a,{className:k.a.CardHeader,avatar:Object(p.jsx)(E.a,{onClick:Q(t),checked:K(t)===t.length&&0!==t.length,indeterminate:K(t)!==t.length&&0!==K(t),disabled:0===t.length}),title:e,subheader:"".concat(K(t),"/").concat(t.length," selected")}),Object(p.jsx)(D.a,{}),Object(p.jsxs)(_.a,{defaultCollapseIcon:Object(p.jsx)("svg",{width:"20",height:"20",fill:"currentColor",children:Object(p.jsx)("use",{href:"".concat(S.a,"#chevron-up")})}),defaultExpandIcon:Object(p.jsx)("svg",{width:"20",height:"20",fill:"currentColor",children:Object(p.jsx)("use",{href:"".concat(S.a,"#chevron-down")})}),expanded:Y,onNodeToggle:$,children:[Object(p.jsx)(C.a,{nodeId:"raters",label:"Raters",children:t.filter((function(e){return"rater"===e.type})).map((function(e){return Object(p.jsxs)(I.a,{role:"listitem",button:!0,onClick:Z(e),children:[Object(p.jsx)(M.a,{children:Object(p.jsx)(E.a,{checked:d.includes(e),disableRipple:!0})}),Object(p.jsx)(F.a,{id:e.id,primary:e.name})]},e.id)}))}),Object(p.jsx)(C.a,{nodeId:"checkers",label:"Checkers",children:t.filter((function(e){return"checker"===e.type})).map((function(e){return Object(p.jsxs)(I.a,{role:"listitem",button:!0,onClick:Z(e),children:[Object(p.jsx)(M.a,{children:Object(p.jsx)(E.a,{checked:d.includes(e),disableRipple:!0})}),Object(p.jsx)(F.a,{id:e.id,primary:e.name})]},e.id)}))})]})]})},te=Object(p.jsxs)("form",{className:k.a.Form,children:[Object(p.jsx)(O.a,{id:"standard-basic",label:"Name",required:!0,value:W,onChange:function(e){X(e.target.value)},error:W.length<4&&W.length>0}),Object(p.jsxs)("div",{className:k.a.Transfer,children:[ee("Choices",m),Object(p.jsxs)("div",{className:k.a.Movers,children:[Object(p.jsx)(H.a,{variant:"outlined",size:"small",onClick:function(){w(v.concat(P)),f(B(m,P)),u(B(d,P))},disabled:0===P.length,children:">"}),Object(p.jsx)(H.a,{variant:"outlined",size:"small",onClick:function(){f(m.concat(z)),w(B(v,z)),u(B(d,z))},disabled:0===z.length,children:"<"})]}),ee("Chosen",v)]})]});return Object(p.jsxs)(y.a,{show:t,onHide:J,children:[Object(p.jsx)(y.a.Header,{}),Object(p.jsx)(y.a.Body,{children:te}),Object(p.jsxs)(y.a.Footer,{children:[Object(p.jsx)(H.a,{onClick:J,children:"Close"}),Object(p.jsx)(H.a,{onClick:function(){q.collection("surveys").add({name:W,trackers:v.map((function(e){return e.id}))}).then((function(){J()})).catch((function(e){return console.log(e)}))},children:"Save"})]})]})})),z=a(501),U=a.n(z),G=a(437),Y=a.n(G),L=a(415),A=a.n(L),V=function(e){if(e<0)return"--:--:--";var t=Math.round(e/1e3),a=(t%60).toString().padStart(2,"0"),c=Math.floor(t/60%60).toString().padStart(2,"0"),n=Math.floor(t/3600).toString().padStart(2,"0");return"".concat(n,":").concat(c,":").concat(a)},W=function(e){var t=new Date(e),a=t.getSeconds().toString().padStart(2,"0"),c=t.getMinutes().toString().padStart(2,"0"),n=t.getHours().toString().padStart(2,"0");return"".concat(n,":").concat(c,":").concat(a)},X=function(e){var t=e.accum,a=e.isRunning,r=e.lastEntry,o=Object(n.useState)("00:00:00"),s=Object(c.a)(o,2),i=s[0],l=s[1],d=Object(n.useState)(0),u=Object(c.a)(d,2),j=u[0],b=u[1],h=Object(n.useCallback)((function(){b(Date.now()-r)}),[r]);return Object(n.useEffect)((function(){var e;return a||b(0),a&&(h(),e=window.setInterval((function(){h()}),1e3)),function(){window.clearInterval(e)}}),[a,h]),Object(n.useEffect)((function(){var e=V(j+t);l(e)}),[t,r,j]),Object(p.jsx)("div",{children:Object(p.jsx)("h3",{style:{margin:"auto auto",display:"block",textAlign:"center",fontWeight:"lighter"},children:i})})},q=a(177),J=a(37),Z=a(502),K=a.n(Z),Q=a(503),$=a.n(Q),ee=a(448),te=a(65),ae=a(504),ce=a.n(ae),ne=r.a.memo((function(e){var t=e.chartData,a=Object(n.useRef)(null),c=Object(n.useCallback)((function(e){if(e){var t=e.getContext("2d");t&&(a.current=new ee.a(t,{type:"bar",data:{datasets:[]},options:{aspectRatio:8,scales:{x:{stacked:!0,max:24,grid:{display:!1},ticks:{stepSize:4,callback:function(e){return"".concat(e,":00")}}},y:{stacked:!0}},indexAxis:"y",onClick:function(e){var t,a,c=e.chart.config._config.data.datasets;console.log(c);var n=null===(t=e.chart._active[0])||void 0===t?void 0:t.datasetIndex;if(n){var r=null===(a=e.chart._active[0])||void 0===a?void 0:a.index;console.log(n),console.log(r),console.log(c[n].data[r])}},elements:{bar:{borderWidth:1,barThickness:2}},responsive:!0,plugins:{legend:{display:!1},tooltip:{enabled:!1}}}}))}}),[]);return Object(n.useEffect)((function(){a.current&&(a.current.data={labels:[""],datasets:t},a.current.update())}),[t]),Object(p.jsx)(te.a,{children:Object(p.jsx)("div",{className:ce.a.BarChart,children:Object(p.jsx)("canvas",{ref:c})})})})),re=r.a.memo((function(e){var t=e.stopwatch,a=e.entries,r=e.date,s=Object(n.useState)(Date.now()),i=Object(c.a)(s,2),l=i[0],d=i[1],u=Object(n.useState)(null),j=Object(c.a)(u,2),b=j[0],h=j[1];Object(n.useEffect)((function(){var e=[],c=new Date(r.getFullYear(),r.getMonth(),r.getDate()).getTime(),n=new Date(r.getFullYear(),r.getMonth(),r.getDate()+1).getTime(),s=[c].concat(Object(o.a)(a.map((function(e){return e.timestamp})))),i=l;s.push(i<n?i:n);var d=[],u=null;s.forEach((function(e){u&&d.push((e-u)/36e5),u=e}));var j=function(e){var a="rgb(225, 225, 225)";return e%2&&(a=t.color),a};d.forEach((function(t,a){e.push({data:[t],backgroundColor:j(a)})})),h(e)}),[t,a,r,l]);var m=Object(n.useCallback)((function(){d(Date.now())}),[]);Object(n.useEffect)((function(){var e=setInterval((function(){m()}),6e4);return function(){clearInterval(e)}}),[m]);var O=Object(p.jsx)("p",{children:"loading..."});return b&&(O=Object(p.jsx)("div",{className:$.a.BarChartPreamp,children:Object(p.jsx)(ne,{chartData:b})})),O})),oe=a(506),se=a(565),ie=a(0),le=a.n(ie),de=a(3),ue=a(49);function je(){return(je=Object(de.a)(le.a.mark((function e(t,a){var c,n;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=[],a.forEach((function(e){var a=be(t,e.year,e.month,e.day);c.push(a)})),e.next=4,Promise.all(c);case 4:return n=e.sent,e.abrupt("return",n.map((function(e){return e.docs})));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var be=function(e,t,a,c){return e.collection("entries").where("year","==",t).where("month","==",a).where("day","==",c).orderBy("timestamp","asc").get()};var he=a(505),me=a.n(he),Oe=a(221),fe=r.a.memo((function(e){var t=e.entry,a=e.submitHandler,r=Object(n.useState)(t.from.timestamp),o=Object(c.a)(r,2),s=o[0],i=o[1],l=Object(n.useState)(t.to.timestamp),u=Object(c.a)(l,2),j=u[0],b=u[1],h=Object(n.useState)(j-s),m=Object(c.a)(h,2),O=m[0],f=m[1],x=new Date(t.from.timestamp),g=new Date(t.to.timestamp),v={fromHour:x.getHours(),fromMinute:x.getMinutes(),fromSecond:x.getSeconds(),toHour:g.getHours(),toMinute:g.getMinutes(),toSecond:g.getSeconds()};return Object(p.jsx)("div",{children:Object(p.jsx)(d.c,{initialValues:v,onSubmit:function(e){},validate:function(e){var a={to:!1,from:!1},c=Object(Oe.b)(e.fromHour,e.fromMinute,e.fromSecond,t.from.timestamp),n=Object(Oe.b)(e.toHour,e.toMinute,e.toSecond,t.to.timestamp),r=c>=t.from.limit,o=c<=n,s=n<=t.to.limit,l=n>c;return r&&o||(a.from=!0),l&&s||(a.to=!0),i(c),b(n),f(n-c),a},children:function(e){var c=e.errors,n=e.values;return Object(p.jsxs)(d.b,{className:me.a.Form,children:[Object(p.jsxs)("div",{className:me.a.Field,style:{borderColor:c.from?"red":"green"},children:[Object(p.jsx)("label",{children:"From:"}),Object(p.jsx)(d.a,{min:0,max:23,type:"number",name:"fromHour"}),Object(p.jsx)("p",{children:":"}),Object(p.jsx)(d.a,{min:0,max:59,type:"number",name:"fromMinute"}),Object(p.jsx)("p",{children:":"}),Object(p.jsx)(d.a,{min:0,max:59,type:"number",name:"fromSecond"})]}),Object(p.jsx)("div",{className:me.a.Limit,children:"Must be between ".concat(Object(Oe.c)(t.from.limit)," and ").concat(Object(Oe.c)(Object(Oe.b)(n.toHour,n.toMinute,n.toSecond,t.to.timestamp)))}),Object(p.jsxs)("div",{className:me.a.Field,style:{borderColor:c.to?"red":"green"},children:[Object(p.jsx)("label",{children:"To:"}),Object(p.jsx)(d.a,{min:0,max:23,type:"number",name:"toHour"}),Object(p.jsx)("p",{children:":"}),Object(p.jsx)(d.a,{min:0,max:59,type:"number",name:"toMinute"}),Object(p.jsx)("p",{children:":"}),Object(p.jsx)(d.a,{min:0,max:59,type:"number",name:"toSecond"})]}),Object(p.jsx)("div",{className:me.a.Limit,children:"Must be between ".concat(Object(Oe.c)(Object(Oe.b)(n.fromHour,n.fromMinute,n.fromSecond,t.from.timestamp))," and ").concat(Object(Oe.c)(t.to.limit))}),Object(p.jsx)("div",{className:me.a.Field,style:{width:"100%",borderColor:c.from?"red":"green"},children:Object(p.jsxs)("p",{style:{fontWeight:"normal",width:"100%"},children:["Sub-Total: ",V(O)]})}),Object(p.jsx)("button",{onClick:function(){return a(s,j)},type:"submit",disabled:!!c.to||!!c.from,children:"Save Changes"})]})}})})})),pe=a(182),xe=function(e){var t=e.show,a=e.closeHandler,c=e.editHandler,r=e.entry,o=e.newEntryHandler,s=Object(n.useContext)(h.a),i=function(e,t){console.log("change");var a=J.b.batch(),n=s.collection("entries").doc(r.from.id);if(a.update(n,{timestamp:e}),r.to.id){var i=s.collection("entries").doc(r.to.id);a.update(i,{timestamp:t})}r.to.id||(console.log("do something else"),o(t)),c(a)};return Object(p.jsxs)(pe.a,{show:t,onHide:a,children:[Object(p.jsx)("div",{style:{width:"100%",height:"60px"},children:"Change the beginning and ending"}),Object(p.jsx)("div",{style:{width:"100%",height:"max-content"},children:Object(p.jsx)(fe,{entry:r,submitHandler:function(e,t){(null===r||void 0===r?void 0:r.index)?i(e,t):(o(e),o(t)),a()}})})]})},ge=r.a.memo((function(e){var t=e.entries,a=e.stopwatch,r=e.date,o=e.show,s=e.closeHandler,i=Object(n.useState)([]),l=Object(c.a)(i,2),d=l[0],u=l[1],j=Object(n.useState)([]),b=Object(c.a)(j,2),m=b[0],O=b[1],f=Object(n.useState)(!1),x=Object(c.a)(f,2),g=x[0],v=x[1],y=Object(n.useState)(null),w=Object(c.a)(y,2),k=w[0],_=w[1],C=Object(n.useContext)(q.a),S=Object(n.useState)([]),N=Object(c.a)(S,2),T=N[0],E=N[1],D=Object(n.useContext)(h.a);Object(n.useEffect)((function(){if(!t.length)return u([]),void E([]);var e=function(e,t,a,c){var n=[],r=c.getTime(),o=new Date(e[0].year,e[0].month,e[0].day+1,0,0,-1).getTime(),s=null,i=0,l=r,d=0;e.forEach((function(e,r){if(r%2){n.pop();var o=e.timestamp-s.timestamp;i+=o;var u={timestamp:s.timestamp,id:s.entryId,limit:l},j={timestamp:e.timestamp,id:e.entryId,limit:null};l=j.timestamp;var b={stopwatchId:t,from:u,to:j,subTotal:o,total:i,index:d};n.push(b)}if(!(r%2)){if(s=e,d++,c.getTime()===a.getTime()){var h={stopwatchId:t,from:{timestamp:e.timestamp,id:e.entryId,limit:0},to:{timestamp:0,id:"",limit:0},subTotal:0,total:0,index:d};n.push(h)}if(c.getTime()!==a.getTime()){var m=new Date(c.getFullYear(),c.getMonth(),c.getDate()+1,0,0,-1).getTime(),O={stopwatchId:t,from:{timestamp:e.timestamp,id:e.entryId,limit:c.getTime()},to:{timestamp:m,id:"",limit:m},subTotal:m-e.timestamp,total:i+m-e.timestamp,index:d};n.push(O)}}}));var u=n.reverse(),j=o;return u.forEach((function(e){e.to&&(e.to.limit=j),j=e.from.timestamp})),u}(t,a.id,C,r);u(e),E(e.map((function(t,a){return t.to.timestamp?{id:e.length-a,from:W(t.from.timestamp),to:W(t.to.timestamp),subTotal:V(t.subTotal),total:V(t.total)}:{id:e.length-a,from:W(t.from.timestamp),to:"now",subTotal:"--:--:--",total:"--:--:--"}})))}),[t,a,C,r]);return Object(p.jsxs)(pe.a,{show:o,onHide:s,children:[Object(p.jsx)("div",{className:K.a.Header,children:Object(p.jsx)(re,{entries:t,stopwatch:a,date:r})}),Object(p.jsx)("div",{className:K.a.body,children:Object(p.jsxs)("div",{className:K.a.Entries,children:[Object(p.jsxs)(se.a,{variant:"text",color:"primary",children:[Object(p.jsx)(H.a,{disabled:1!==m.length,onClick:function(){var e=d.length-m[0],t=[];t.push(d[e].from.id),d[e].to.id&&t.push(d[e].to.id);var a=J.b.batch();t.forEach((function(e){var t=D.collection("entries").doc(e);a.delete(t)})),a.commit().then((function(){console.log("deleted"),O([])})).catch((function(e){return console.log(e)}))},children:"Delete"}),Object(p.jsx)(H.a,{disabled:1!==m.length,onClick:function(){var e=d.length-m[0];_(d[e]),v(!0)},children:"Edit"}),Object(p.jsx)(H.a,{onClick:function(){if(!d[0]||0!==d[0].to.timestamp){var e=new Date(r.getFullYear(),r.getMonth(),r.getDate()).getTime(),t=r.getTime()!==C.getTime()?new Date(r.getFullYear(),r.getMonth(),r.getDate()+1).getTime():Date.now(),c=d[0]?d[0].to.timestamp:e,n={stopwatchId:a.id,from:{timestamp:c,id:"",limit:c},to:{timestamp:c,id:"",limit:t},subTotal:0,total:0,index:0};_(n),v(!0)}},disabled:!!d[0]&&0===d[0].to.timestamp,children:"New Entry"})]}),Object(p.jsx)(oe.a,{rows:T,rowHeight:30,columns:[{field:"id",headerName:"Index",width:30,sortable:!1,filterable:!1},{field:"from",headerName:"From",width:100,editable:!0,sortable:!1,filterable:!1},{field:"to",headerName:"To",width:100,editable:!0,sortable:!1,filterable:!1},{field:"subTotal",headerName:"Sub-Total",width:120,editable:!1,sortable:!1,filterable:!1},{field:"total",headerName:"Total",width:100,editable:!1,sortable:!1,filterable:!1}],pageSize:6,rowsPerPageOptions:[6],checkboxSelection:!0,onSelectionModelChange:function(e){O(e)},selectionModel:m,headerHeight:40}),g?Object(p.jsx)(xe,{show:g,entry:k,closeHandler:function(){v(!1)},newEntryHandler:function(e){D.collection("entries").add({timestamp:e,trackerId:a.id,year:r.getFullYear(),month:r.getMonth(),day:r.getDate(),type:"stopwatchEntry"}).then((function(){})).catch((function(e){return console.log(e)}))},editHandler:function(e){console.log(e),e.commit().then((function(){console.log("we did it!"),v(!1)})).catch((function(e){e&&console.log("try again",e)}))}}):null]})})]})})),ve=a(416),ye=Object(i.b)((function(e){return{user:e.user}}))((function(e){var t=Object(n.useState)(!1),a=Object(c.a)(t,2),r=a[0],o=a[1],s=Object(n.useState)(0),i=Object(c.a)(s,2),l=i[0],d=i[1],u=Object(n.useState)(!1),j=Object(c.a)(u,2),b=j[0],m=j[1],O=Object(n.useState)(Date.now()),f=Object(c.a)(O,2),x=f[0],g=f[1],v=Object(n.useContext)(q.a),y=Object(n.useContext)(h.a),w=Object(n.useState)([]),k=Object(c.a)(w,2),_=k[0],C=k[1];Object(n.useEffect)((function(){C([]),m(!1),d(0),console.log(y,e.user);var t=Object(ve.a)(y,"entries"),a=Object(ve.d)(t,Object(ve.e)("trackerId","==",e.stopwatch.id),Object(ve.e)("year","==",e.date.getFullYear()),Object(ve.e)("month","==",e.date.getMonth()),Object(ve.e)("day","==",e.date.getDate()),Object(ve.c)("timestamp","asc"));return Object(ve.b)(a,(function(e){var t=[];e.forEach((function(e){var a=e.data(),c={timestamp:a.timestamp,trackerId:a.trackerId,entryId:e.id,year:a.year,month:a.month,day:a.day,type:"stopwatchEntry"};t.push(c)})),C(t)}))}),[y,e.date,e.stopwatch.id,e.user]),Object(n.useEffect)((function(){if(!_.length)return m(!1),void d(0);var t=!(_.length%2);m(!t);var a=_.map((function(e){return e.timestamp}));if(!t){if(e.date.getTime()===v.getTime()){var c=a.pop();g(c)}e.date.getTime()!==v.getTime()&&(m(!1),a.push(new Date(e.date.getFullYear(),e.date.getMonth(),e.date.getDate()+1,0,0,-1).getTime()))}var n=0;a.forEach((function(e,t){t%2?n+=e:n-=e})),d(n)}),[_,e.date,v]);return Object(p.jsxs)("div",{onClick:function(t){t.target.closest(".main-button")||e.selector(e.stopwatch.id)},className:A.a.Tracker,style:{borderColor:e.stopwatch.color,boxShadow:e.isSelected?"1px 1px 10px 1px ".concat(e.stopwatch.color):"none"},children:[Object(p.jsxs)("div",{className:Y.a.Content,children:[Object(p.jsx)("button",{className:"".concat(Y.a.MainButton,"     main-button"),onClick:function(){var t=Date.now();y.collection("entries").add({timestamp:t,trackerId:e.stopwatch.id,year:v.getFullYear(),month:v.getMonth(),day:v.getDate(),type:"stopwatchEntry"}).then((function(){})).catch((function(e){return console.log(e)}))},disabled:e.date.getTime()!==v.getTime(),children:Object(p.jsx)("svg",{width:"50",height:"50",fill:"currentColor",children:Object(p.jsx)("use",{href:"".concat(S.a,"#").concat(b?"pause":"play","-circle")})})}),Object(p.jsx)("h5",{className:Y.a.Header,children:e.stopwatch.name}),Object(p.jsx)(X,{isRunning:b,accum:l,lastEntry:x}),Object(p.jsx)("button",{onClick:function(){return o(!r)},className:"".concat(Y.a.ExpandButton,"     nothing"),children:Object(p.jsx)("svg",{width:"24",height:"24",fill:"currentColor",children:Object(p.jsx)("use",{href:"".concat(S.a,"#list-ul")})})})]}),Object(p.jsx)(ge,{show:r,entries:_,stopwatch:e.stopwatch,date:e.date,closeHandler:function(){return o(!1)}})]})})),we=a(586),ke=a(438),_e=a.n(ke),Ce=Object(i.b)((function(e){return{user:e.user}}))((function(e){var t=Object(n.useState)(0),a=Object(c.a)(t,2),r=a[0],o=a[1],s=Object(n.useContext)(h.a),i=Object(n.useState)(null),l=Object(c.a)(i,2),d=l[0],u=l[1];Object(n.useEffect)((function(){u(null),o(0);var t=Object(ve.a)(s,"entries"),a=Object(ve.d)(t,Object(ve.e)("trackerId","==",e.rater.id),Object(ve.e)("year","==",e.date.getFullYear()),Object(ve.e)("month","==",e.date.getMonth()),Object(ve.e)("day","==",e.date.getDate()),Object(ve.c)("timestamp","asc"));return Object(ve.b)(a,(function(e){e.forEach((function(e){var t=e.data(),a={timestamp:t.timestamp,value:t.value,trackerId:t.trackerId,entryId:e.id,year:t.year,month:t.month,day:t.day,type:"raterEntry"};u(a),o(a.value)}))}))}),[s,e.date,e.rater.id,e.user]);return Object(p.jsx)("div",{onClick:function(t){t.target.closest(".main-button")||e.selector(e.rater.id)},style:{borderColor:e.rater.color,boxShadow:e.isSelected?"1px 1px 10px 1px ".concat(e.rater.color):"none"},className:A.a.Tracker,children:Object(p.jsxs)("div",{className:_e.a.Content,children:[Object(p.jsx)("h5",{className:_e.a.Header,children:e.rater.name}),Object(p.jsx)(we.a,{className:_e.a.Rating,name:e.rater.id,value:r,onChange:function(t,a){var c=Date.now();d||s.collection("entries").add({value:a,timestamp:c,trackerId:e.rater.id,year:e.date.getFullYear(),month:e.date.getMonth(),day:e.date.getDate(),type:"raterEntry"}).then((function(){})).catch((function(e){return console.log(e)})),d&&s.collection("entries").doc(d.entryId).update({value:a}).then((function(){})).catch((function(e){return console.log(e)}))},size:"large",precision:.5})]})})})),Se=a(439),Ne=a.n(Se),Te=Object(i.b)((function(e){return{user:e.user}}))((function(e){var t=Object(n.useState)(!1),a=Object(c.a)(t,2),r=a[0],o=a[1],s=Object(n.useContext)(h.a),i=Object(n.useState)(null),l=Object(c.a)(i,2),d=l[0],u=l[1];Object(n.useEffect)((function(){u(null),o(!1);var t=Object(ve.a)(s,"entries"),a=Object(ve.d)(t,Object(ve.e)("trackerId","==",e.checker.id),Object(ve.e)("year","==",e.date.getFullYear()),Object(ve.e)("month","==",e.date.getMonth()),Object(ve.e)("day","==",e.date.getDate()),Object(ve.c)("timestamp","asc"));return Object(ve.b)(a,(function(e){e.forEach((function(e){var t=e.data(),a={timestamp:t.timestamp,trackerId:t.trackerId,entryId:e.id,year:t.year,month:t.month,day:t.day,type:"checkerEntry",checked:t.checked};u(a),o(t.checked)}))}))}),[s,e.date,e.checker.id,e.user]);return Object(p.jsx)("div",{onClick:function(t){t.target.closest(".main-button")||e.selector(e.checker.id)},className:A.a.Tracker,style:{borderColor:e.checker.color,boxShadow:e.isSelected?"1px 1px 10px 1px ".concat(e.checker.color):"none"},children:Object(p.jsxs)("div",{className:Ne.a.Content,children:[Object(p.jsx)("h5",{className:Ne.a.Header,children:e.checker.name}),Object(p.jsx)("div",{className:Ne.a.CheckBox,children:Object(p.jsx)(E.a,{checked:r,onChange:function(){var t=Date.now(),a=!r;d||s.collection("entries").add({timestamp:t,trackerId:e.checker.id,year:e.date.getFullYear(),month:e.date.getMonth(),day:e.date.getDate(),type:"checkerEntry",checked:a}).then((function(){})).catch((function(e){return console.log(e)})),d&&s.collection("entries").doc(d.entryId).update({checked:a}).then((function(){})).catch((function(e){return console.log(e)}))},className:"main-button",color:"primary"})})]})})})),Ee=a(440),De=a.n(Ee),Ie=Object(i.b)((function(e){return{user:e.user}}))((function(e){var t=Object(n.useState)(0),a=Object(c.a)(t,2),r=a[0],o=a[1],s=Object(n.useContext)(h.a),i=Object(n.useState)(null),l=Object(c.a)(i,2),d=l[0],u=l[1];Object(n.useEffect)((function(){o(0),u(null);var t=Object(ve.a)(s,"entries"),a=Object(ve.d)(t,Object(ve.e)("trackerId","==",e.counter.id),Object(ve.e)("year","==",e.date.getFullYear()),Object(ve.e)("month","==",e.date.getMonth()),Object(ve.e)("day","==",e.date.getDate()),Object(ve.c)("timestamp","asc"));return Object(ve.b)(a,(function(e){e.forEach((function(e){var t=e.data(),a={count:t.count,timestamp:t.timestamp,trackerId:t.trackerId,entryId:e.id,year:t.year,month:t.month,day:t.day,type:"counterEntry"};o(t.count),u(a)}))}))}),[s,e.date,e.counter.id,e.user]);var j=function(t){var a;a=!!t.target.closest(".plus")?r+e.counter.size:r-e.counter.size<0?0:r-e.counter.size;var c=Date.now();d||s.collection("entries").add({count:a,timestamp:c,trackerId:e.counter.id,year:e.date.getFullYear(),month:e.date.getMonth(),day:e.date.getDate(),type:"counterEntry"}).then((function(){})).catch((function(e){return console.log(e)})),d&&s.collection("entries").doc(d.entryId).update({count:a}).then((function(){})).catch((function(e){return console.log(e)}))};return Object(p.jsx)("div",{onClick:function(t){t.target.closest(".main-button")||e.selector(e.counter.id)},className:A.a.Tracker,style:{borderColor:e.counter.color,boxShadow:e.isSelected?"1px 1px 10px 1px ".concat(e.counter.color):"none"},children:Object(p.jsxs)("div",{className:De.a.Content,children:[Object(p.jsx)("h5",{className:De.a.Header,children:e.counter.name}),Object(p.jsxs)(se.a,{className:De.a.Buttons,color:"primary",children:[Object(p.jsx)(H.a,{className:"main-button   plus",onClick:j,children:Object(p.jsx)("svg",{width:"20",height:"20",fill:"currentColor",children:Object(p.jsx)("use",{href:"".concat(S.a,"#plus")})})}),Object(p.jsx)(H.a,{className:"main-button",color:"primary",children:r}),Object(p.jsx)(H.a,{className:"main-button   minus",onClick:j,disabled:0===r,children:Object(p.jsx)("svg",{width:"20",height:"20",fill:"currentColor",children:Object(p.jsx)("use",{href:"".concat(S.a,"#dash")})})})]})]})})})),Me=a(510),Fe=a.n(Me),He=a(239),Be=a(566),Re=a(523),Pe=a.n(Re),ze=a(396),Ue=a(587),Ge=a(572),Ye=a(582),Le=a(429),Ae=r.a.memo((function(e){var t,a=e.type,r=e.color,o=e.name,s=e.size,i=Object(n.useState)(0),l=Object(c.a)(i,2),d=l[0],u=l[1];switch(console.log(a),a){case"stopwatch":t=Object(p.jsxs)("div",{className:Y.a.Content,children:[Object(p.jsx)("button",{className:"".concat(Y.a.MainButton,"     main-button"),children:Object(p.jsx)("svg",{width:"50",height:"50",fill:"currentColor",children:Object(p.jsx)("use",{href:"".concat(S.a,"#play-circle")})})}),Object(p.jsx)("h5",{className:Y.a.Header,style:{color:"grey"},children:o}),Object(p.jsx)("h3",{style:{margin:"auto auto",display:"block",textAlign:"center"},children:"00:00:00"})]});break;case"checker":t=Object(p.jsxs)("div",{className:Ne.a.Content,children:[Object(p.jsx)("h5",{className:Ne.a.Header,style:{color:"grey "},children:o}),Object(p.jsx)("div",{className:Ne.a.CheckBox,children:Object(p.jsx)(E.a,{checked:!0,className:"main-button",color:"primary"})})]});break;case"counter":t=Object(p.jsxs)("div",{className:De.a.Content,children:[Object(p.jsx)("h5",{className:De.a.Header,style:{color:"grey "},children:o}),Object(p.jsxs)(se.a,{className:De.a.Buttons,color:"primary",children:[Object(p.jsx)(H.a,{onClick:function(){return u(d+s)},children:Object(p.jsx)("svg",{width:"20",height:"20",fill:"currentColor",children:Object(p.jsx)("use",{href:"".concat(S.a,"#plus")})})}),Object(p.jsx)(H.a,{color:"primary",children:d}),Object(p.jsx)(H.a,{onClick:function(){return u(d-s<0?0:d-s)},disabled:0===d,children:Object(p.jsx)("svg",{width:"20",height:"20",fill:"currentColor",children:Object(p.jsx)("use",{href:"".concat(S.a,"#dash")})})})]})]});break;default:t=Object(p.jsxs)("div",{className:_e.a.Content,children:[Object(p.jsx)("h5",{className:_e.a.Header,style:{color:"grey "},children:o}),Object(p.jsx)(we.a,{className:_e.a.Rating,name:"stars",defaultValue:3,size:"large"})]})}return Object(p.jsx)("div",{className:A.a.Tracker,style:{borderColor:r},children:t})})),Ve=["stopwatch","counter","checker","rater"],We={noActiveUser:function(){return s.g()},onSignout:function(){return s.j("")}},Xe=Object(i.b)((function(e){return{user:e.user,userName:e.userName}}),We)((function(e){var t=r.a.useState(1),a=Object(c.a)(t,2),n=a[0],o=a[1],s=r.a.useState(null),i=Object(c.a)(s,2),l=i[0],d=i[1],u=r.a.useState(null),j=Object(c.a)(u,2),b=j[0],h=j[1],m=r.a.useState(null),O=Object(c.a)(m,2),f=O[0],x=O[1],g=r.a.useState(new Map),v=Object(c.a)(g,2),y=v[0],w=v[1],k=r.a.useState(null),_=Object(c.a)(k,2),C=_[0],S=_[1];r.a.useEffect((function(){var e=new Map;e.set("stopwatch","Recommended"),e.set("counter","Possible"),e.set("rater","Possible"),e.set("checker",""),w(e)}),[e]);var N,T;switch(l){case"obj":N="Something that also an outsider looking at me could have measured";break;case"subj":N="Somebody looking from the outside couldn't tell, only i can know";break;default:N="Please select one"}switch(n){case 1:T=Object(p.jsxs)("div",{className:Pe.a.Card,children:[Object(p.jsxs)("div",{className:Pe.a.Toggle,children:[Object(p.jsx)("h5",{children:"I want to track something"}),Object(p.jsxs)("div",{onClick:function(e){e.target.closest(".obj")&&d("obj"),e.target.closest(".subj")&&d("subj")},className:Pe.a.Togglegroup,children:[Object(p.jsx)("button",{style:{borderRadius:"10px 0px 0px 10px",backgroundColor:"obj"===l?"rgb(75, 198, 255)":"white"},className:"obj",children:"objective"}),Object(p.jsx)("div",{}),Object(p.jsx)("button",{style:{borderRadius:"0px 10px 10px 0px",backgroundColor:"subj"===l?"rgb(75, 198, 255)":"white"},className:"subj",children:"subjective"})]})]}),Object(p.jsx)("p",{children:N})]});break;case 2:T=Object(p.jsx)("div",{className:Pe.a.Card,children:Object(p.jsxs)(ze.a,{component:"fieldset",children:[Object(p.jsx)("h5",{children:"Does duration matter?"}),Object(p.jsx)(Ue.a,{"aria-label":"gender",name:"controlled-radio-buttons-group",value:b,onChange:function(e){h(e.target.value)},children:Object(p.jsxs)("div",{className:Pe.a.RadioOptions,children:[Object(p.jsx)(Ge.a,{value:"no",control:Object(p.jsx)(Ye.a,{}),label:"Definitely not."}),Object(p.jsx)(Ge.a,{value:"neutral",control:Object(p.jsx)(Ye.a,{}),label:"It's pretty much the same duration every time."}),Object(p.jsx)(Ge.a,{value:"yes",control:Object(p.jsx)(Ye.a,{}),label:"Duration is exactly what i want to track about it."})]})})]})});break;case 3:T=Object(p.jsx)("div",{className:Pe.a.Card,children:Object(p.jsxs)(ze.a,{component:"div",children:[Object(p.jsxs)("h5",{children:["Does iteration matter? ",Object(p.jsx)("small",{children:"(i.e how many times...)"})]}),Object(p.jsx)(Ue.a,{value:f,onChange:function(e){x(e.target.value)},children:Object(p.jsxs)("div",{className:Pe.a.RadioOptions,children:[Object(p.jsx)(Ge.a,{value:"no",control:Object(p.jsx)(Ye.a,{}),label:"Definitely not."}),Object(p.jsx)(Ge.a,{value:"neutral",control:Object(p.jsx)(Ye.a,{}),label:"It's the same iteration every time."}),Object(p.jsx)(Ge.a,{value:"yes",control:Object(p.jsx)(Ye.a,{}),label:"Iteration is exactly what i want to track about it."})]})})]})});break;default:T=Object(p.jsxs)("div",{className:Pe.a.Card,style:{boxShadow:"none"},children:[Object(p.jsx)("h5",{children:"Choose a tracker:"}),Object(p.jsx)("div",{className:Pe.a.Options,children:Ve.map((function(e,t){var a,c,n;switch(y.get(e)){case"Recommended":a="rgb(3, 219, 57)",c=1,n=Pe.a.Recommended;break;case"Possible":a="rgb(46, 196, 255)",c=2,n=Pe.a.Possible;break;default:a="rgb(190, 190, 190)",c=4,n=Pe.a.NotRec}return Object(p.jsxs)("div",{style:{order:c,boxShadow:C===e?"1px 1px 20px 3px ".concat(a):""},onClick:function(){return S(e)},className:"".concat(Pe.a.Option,"  ").concat(n),children:[Object(p.jsx)("h5",{style:{color:a},children:y.get(e)}),Object(p.jsx)(Ae,{type:e,color:a,name:e.slice(0,1).toUpperCase()+e.slice(1),size:0})]},t)}))})]})}return Object(p.jsxs)("div",{className:Pe.a.NewUser,children:[Object(p.jsxs)("div",{className:Pe.a.Header,children:[Object(p.jsx)("h1",{children:"Let's get you started!"}),Object(p.jsx)("p",{children:"In just a minute, we'll choose the right Tracker type for you"})]}),Object(p.jsx)(Le.a,{}),Object(p.jsx)("div",{className:Pe.a.Body,children:T}),Object(p.jsx)(Le.a,{}),Object(p.jsxs)("div",{className:Pe.a.ButtonPanel,children:[Object(p.jsxs)("div",{className:Pe.a.LeftButtons,children:[Object(p.jsx)("button",{onClick:function(){o(4===n?"subj"===l?1:"yes"===b?2:3:n-1)},disabled:1===n,className:Pe.a.Back,children:"Back"}),Object(p.jsx)("button",{onClick:function(){e.onClose()},className:Pe.a.Skip,children:"Close"})]}),Object(p.jsx)("button",{disabled:function(){var e;switch(n){case 1:e=!l;break;case 2:e=!b;break;case 3:e=!f;break;case 4:e=!C;break;default:e=!0}return e}(),onClick:function(){var t=new Map;4!==n?(3===n&&("yes"===f?(t.set("stopwatch",""),t.set("counter","Recommended"),t.set("rater",""),t.set("checker","Possible"),S("counter")):(t.set("stopwatch","Possible"),t.set("counter","Possible"),t.set("rater",""),t.set("checker","Recommended"),S("checker")),o(4)),2===n&&("yes"===b?(t.set("stopwatch","Recommended"),t.set("counter",""),t.set("rater",""),t.set("checker","Possible"),S("stopwatch"),o(4)):o(3)),1===n&&("subj"===l?(t.set("stopwatch",""),t.set("counter",""),t.set("rater","Recommended"),t.set("checker",""),S("rater"),o(4)):o(2)),w(t)):e.onFinish(C)},className:Pe.a.Next,children:"Next"})]})]})})),qe=r.a.memo((function(e){var t=e.stopwatches,a=e.raters,r=e.checkers,s=e.counters,i=e.higherIsEmpty,l=Object(n.useState)(!1),d=Object(c.a)(l,2),u=d[0],j=d[1],b=Object(n.useState)(!1),O=Object(c.a)(b,2),f=O[0],x=O[1],g=Object(n.useContext)(q.a),y=Object(n.useState)(null),w=Object(c.a)(y,2),k=w[0],_=w[1],C=Object(n.useState)(!1),S=Object(c.a)(C,2),N=S[0],T=S[1],E=Object(n.useState)(!1),D=Object(c.a)(E,2),I=D[0],M=D[1],F=Object(n.useState)(""),H=Object(c.a)(F,2),B=H[0],R=H[1],z=Object(n.useState)(null),G=Object(c.a)(z,2),Y=G[0],L=G[1],A=Object(n.useState)(g),V=Object(c.a)(A,2),W=V[0],X=V[1],J=Object(n.useContext)(h.a);Object(n.useEffect)((function(){i&&(M(!0),console.log("is empty"))}),[i]),Object(n.useEffect)((function(){g&&X(g)}),[g]);var Z=function(e){var t=e.target.outerText.toLowerCase();if("not sure?"===t)return console.log("not sure"),M(!0),void T(!1);console.log("sure"),T(!1),R(t),L(null),j(!0)},K=function(){j(!1)},Q=function(e){if(e!==(null===Y||void 0===Y?void 0:Y.id)){var c=[].concat(Object(o.a)(t),Object(o.a)(s),Object(o.a)(a),Object(o.a)(r)).filter((function(t){return t.id===e}))[0];L(c),R(c.type)}else L(null)};return Object(p.jsxs)("div",{className:U.a.Trackers,children:[Object(p.jsx)("div",{className:U.a.Top,children:Object(p.jsx)("div",{className:U.a.DatePicker,children:Object(p.jsx)(Fe.a,{maxDate:g,value:W,locale:"en-EN",onChange:X,clearIcon:null})})}),Object(p.jsxs)("div",{className:U.a.Container,children:[t.map((function(e){return Object(p.jsx)(ye,{stopwatch:e,date:W,selector:Q,isSelected:(null===Y||void 0===Y?void 0:Y.id)===e.id},e.id)})),a.map((function(e){return Object(p.jsx)(Ce,{isSelected:(null===Y||void 0===Y?void 0:Y.id)===e.id,rater:e,selector:Q,date:W},e.id)})),r.map((function(e){return Object(p.jsx)(Te,{selector:Q,isSelected:(null===Y||void 0===Y?void 0:Y.id)===e.id,checker:e,date:W},e.id)})),s.map((function(e){return Object(p.jsx)(Ie,{selector:Q,isSelected:(null===Y||void 0===Y?void 0:Y.id)===e.id,counter:e,date:W},e.id)}))]}),Object(p.jsxs)("div",{className:U.a.ControlPanel,children:[Object(p.jsx)("button",{className:U.a.Button,onClick:function(e){_(e.currentTarget),T(!0)},children:"New"}),Object(p.jsxs)(He.a,{id:"simple-menu",anchorEl:k,keepMounted:!0,open:N,onClose:function(){return T(!1)},children:[Object(p.jsx)(Be.a,{onClick:Z,children:"Stopwatch"}),Object(p.jsx)(Be.a,{onClick:Z,children:"Checker"}),Object(p.jsx)(Be.a,{onClick:Z,children:"Rater"}),Object(p.jsx)(Be.a,{onClick:Z,children:"Counter"}),Object(p.jsx)(Be.a,{style:{backgroundColor:"rgb(236, 54, 141)"},onClick:Z,children:"Not sure?"})]}),Object(p.jsx)("div",{}),Object(p.jsx)("button",{className:U.a.Button,onClick:function(){j(!0)},disabled:!Y,children:"Edit"}),Object(p.jsx)("div",{}),Object(p.jsx)("button",{className:U.a.Button,onClick:function(){Object(m.e)(J,Y),L(null)},disabled:!Y,children:"Delete"})]}),u?Object(p.jsx)(pe.a,{show:!0,onHide:K,children:Object(p.jsx)(v,{onFinish:K,selected:Y,type:B})}):null,Object(p.jsx)(P,{show:f,closeHandler:function(){return x(!1)},checkers:r,raters:a}),I?Object(p.jsx)(pe.a,{show:!0,onHide:function(){},children:Object(p.jsx)(Xe,{onFinish:function(e){R(e),M(!1),j(!0)},onClose:function(){return M(!1)}})}):null]})})),Je=a(524),Ze=a.n(Je),Ke=a(525),Qe=a.n(Ke),$e=a(526),et=a.n($e),tt=r.a.memo((function(e){var t=e.color,a=e.name,c=e.selectHandler,n=e.id,r=e.selected;return Object(p.jsxs)("button",{onClick:function(){return c(n)},className:et.a.Label,children:[Object(p.jsx)("div",{style:{backgroundColor:r?t:"transparent",borderColor:t}}),Object(p.jsx)("p",{children:a})]})})),at=r.a.memo((function(e){var t=e.checkers,a=e.raters,r=e.stopwatches,o=e.handler,s=e.selectedTrackers,i=e.counters,l=Object(n.useState)(["stopwatches","raters","checkers","counters"]),d=Object(c.a)(l,2),u=d[0],j=d[1];return Object(p.jsx)("div",{className:Qe.a.TrackerSelector,children:Object(p.jsxs)(_.a,{defaultCollapseIcon:Object(p.jsx)("svg",{width:"20",height:"20",fill:"currentColor",children:Object(p.jsx)("use",{href:"".concat(S.a,"#chevron-up")})}),defaultExpandIcon:Object(p.jsx)("svg",{width:"20",height:"20",fill:"currentColor",children:Object(p.jsx)("use",{href:"".concat(S.a,"#chevron-down")})}),expanded:u,selected:s.map((function(e){return e.id})),onNodeToggle:function(e,t){j(t)},onNodeSelect:function(e,t){o(t)},children:[Object(p.jsxs)(C.a,{nodeId:"raters",label:"Raters",children:[a.map((function(e){return Object(p.jsx)(tt,{color:e.color,name:e.name,id:e.id,selected:s.map((function(e){return e.id})).includes(e.id),selectHandler:o},e.id)})),a.length?null:Object(p.jsx)("p",{children:"no raters yet..."})]}),Object(p.jsxs)(C.a,{nodeId:"stopwatches",label:"Stopwatches",children:[r.map((function(e){return Object(p.jsx)(tt,{color:e.color,name:e.name,id:e.id,selected:s.map((function(e){return e.id})).includes(e.id),selectHandler:o},e.id)})),r.length?null:Object(p.jsx)("p",{children:"no stopwatches yet..."})]}),Object(p.jsxs)(C.a,{nodeId:"checkers",label:"Checkers",children:[t.map((function(e){return Object(p.jsx)(tt,{color:e.color,name:e.name,id:e.id,selected:s.map((function(e){return e.id})).includes(e.id),selectHandler:o},e.id)})),t.length?null:Object(p.jsx)("p",{children:"no checkers yet..."})]}),Object(p.jsxs)(C.a,{nodeId:"counters",label:"Counters",children:[i.map((function(e){return Object(p.jsx)(tt,{color:e.color,name:e.name,id:e.id,selected:s.map((function(e){return e.id})).includes(e.id),selectHandler:o},e.id)})),i.length?null:Object(p.jsx)("p",{children:"no counters yet..."})]})]})})})),ct=a(527),nt=a.n(ct),rt=a(528),ot=a.n(rt),st=r.a.memo((function(e){var t=e.dateRange,a=e.setDateRange,c=e.todaysDate;return Object(p.jsx)("div",{className:nt.a.Selector,style:{zIndex:1e4},children:Object(p.jsx)(ot.a,{value:t,maxDate:c,locale:"en-EN",onChange:a,clearIcon:null})})})),it=a(532),lt=a.n(it),dt=r.a.memo((function(e){var t=e.labels,a=e.datasets,c=e.options,r=Object(n.useRef)(null),o=Object(n.useCallback)((function(e){if(e){var t=e.getContext("2d");t&&(r.current=new ee.a(t,{type:"bar",data:{datasets:[]}}))}}),[]);return Object(n.useEffect)((function(){r.current&&(r.current.data={labels:t,datasets:a},r.current.options=c,r.current.update())}),[a,t,c]),Object(p.jsx)(te.a,{children:Object(p.jsx)("div",{className:lt.a.BarChart,children:Object(p.jsx)("canvas",{ref:o})})})})),ut=a(533),jt=r.a.memo((function(e){var t=e.stopwatches,a=e.selectedTrackers,r=e.stopwatchEntries,o=e.raters,s=e.raterEntries,i=e.dateStrings,l=e.checkers,d=e.counters,u=e.counterEntries,j=e.checkerEntries,b=Object(n.useState)([]),h=Object(c.a)(b,2),m=h[0],O=h[1],f=Object(n.useState)({}),x=Object(c.a)(f,2),g=x[0],v=x[1],y=Object(n.useContext)(q.a);return Object(n.useEffect)((function(){var e={elements:{point:{radius:1}},interaction:{mode:"index",intersect:!1},stacked:!1,scales:{y:{type:"linear",display:!1,position:"left",title:{display:!1}},y1:{suggestedMax:5,ticks:{stepSize:1},type:"linear",display:!0,position:"right",title:{display:!0,text:"Rating"},grid:{drawOnChartArea:!0}}},plugins:{tooltip:{enabled:!1,displayColors:!1},legend:{display:!1}}};if(!a.length)return O([{data:[0,0,0,0,0,0,0],backgroundColor:"black",borderColor:"black",type:"bar",stepped:!1,order:1,yAxisID:"y",tension:1}]),void v(e);var c=[];t.forEach((function(t){if(a.map((function(e){return e.id})).includes(t.id)){e.scales.y.display=!0,e.scales.y.suggestedMax=4,e.scales.y.title={display:!0,text:"Hours"},e.scales.y1.grid.drawOnChartArea=!1;var n=[];r.forEach((function(e){var a=e.filter((function(e){return e.trackerId===t.id}));if(a.length%2){var c=a[a.length-1],r=new Date(c.year,c.month,c.day).getTime()===y.getTime();if(!r){var o=function(e){var t=new Date(e.year,e.month,e.day+1,0,0,-1).getTime();return Object(ue.a)(Object(ue.a)({},e),{},{timestamp:t})}(c);a.push(o)}r&&a.push(Object(ue.a)(Object(ue.a)({},c),{},{timestamp:Date.now()}))}var s=0;a.forEach((function(e,t){t%2===0?s-=e.timestamp:s+=e.timestamp}));var i=s/36e5;n.unshift(i)}));var o={data:n,backgroundColor:t.color,borderColor:t.color,type:"bar",stepped:!1,order:1,yAxisID:"y",tension:1};c.push(o)}})),o.forEach((function(e){if(a.map((function(e){return e.id})).includes(e.id)){var t=[];s.forEach((function(a){var c,n=a.filter((function(t){return t.trackerId===e.id})),r=null===(c=n[n.length-1])||void 0===c?void 0:c.value;t.unshift(r||null)}));var n={data:t,backgroundColor:e.color,borderColor:e.color,type:"line",stepped:!1,order:0,yAxisID:"y1",tension:.4};c.push(n)}})),l.forEach((function(t){if(a.map((function(e){return e.id})).includes(t.id)){e.scales.y.display=!1,e.scales.y1.grid.drawOnChartArea=!0;var n=[];j.forEach((function(e){var a=e.filter((function(e){return e.trackerId===t.id}))[0];n.unshift((null===a||void 0===a?void 0:a.checked)?1:0)}));var r=Object(ut.a)(t.color),o="rgba(".concat(r.red,", ").concat(r.green,", ").concat(r.blue,", 0.6)"),s={data:n,backgroundColor:o,borderColor:t.color,type:"bar",stepped:!1,order:1,yAxisID:"y",tension:1};c.push(s)}})),d.forEach((function(t){if(e.scales.y.display=!0,a.map((function(e){return e.id})).includes(t.id)){e.scales.y.suggestedMax=t.size,e.scales.y.title.text="Count",e.scales.y1.grid.drawOnChartArea=!1;var n=[];u.forEach((function(e){var a=e.filter((function(e){return e.trackerId===t.id}))[0],c=null===a||void 0===a?void 0:a.count;n.unshift(c||0)}));var r={data:n,backgroundColor:t.color,borderColor:t.color,type:"bar",stepped:!1,order:1,yAxisID:"y",tension:1};c.push(r)}})),O(c),v(e)}),[r,a,t,s,o,l,j,d,u,y]),Object(p.jsx)("div",{style:{display:"flex",flexFlow:"column"},children:Object(p.jsx)(dt,{datasets:m,labels:i,options:g})})})),bt=(a(426),r.a.memo((function(e){var t=e.stopwatches,a=e.checkers,r=e.raters,o=e.selectedTrackers,s=e.dateRange,i=e.counters,l=Object(n.useState)(new Map),d=Object(c.a)(l,2),u=d[0],j=d[1],b=Object(n.useState)(new Map),m=Object(c.a)(b,2),O=m[0],f=m[1],x=Object(n.useState)(new Map),g=Object(c.a)(x,2),v=g[0],y=g[1],w=Object(n.useState)(new Map),k=Object(c.a)(w,2),_=k[0],C=k[1],S=Object(n.useState)([]),N=Object(c.a)(S,2),T=N[0],E=N[1],D=Object(n.useContext)(h.a),I=Object(n.useContext)(q.a);return console.log("rendering chart selector"),Object(n.useEffect)((function(){var e=function(e){for(var t=[],a=e[1].getFullYear(),c=e[1].getMonth(),n=(e[1].getTime()-e[0].getTime())/864e5,r=0;r<Math.round(n);r++){var o=e[1].getDate()-r,s=new Date(a,c,o),i=s.getDate(),l=s.getMonth(),d=s.getFullYear();t.push({year:d,month:l,day:i})}return t}(s),t=e.map((function(e){return"".concat(e.day,"/").concat(e.month+1)}));E(t.reverse());var a=new Map,c=new Map,n=new Map,r=new Map;(function(e,t){return je.apply(this,arguments)})(D,e).then((function(e){e.forEach((function(e,o){var s=[],i=[],l=[],d=[];e.forEach((function(e){var t=e.data();switch(t.type){case"stopwatchEntry":s.push(t);break;case"raterEntry":i.push(t);break;case"counterEntry":d.push(t);break;default:l.push(t)}})),a.set(t[o],s),c.set(t[o],i),n.set(t[o],l),r.set(t[o],d)})),j(a),y(c),f(n),C(r)}))}),[I,D,s]),Object(p.jsx)("div",{style:{marginLeft:"4px"},children:Object(p.jsx)(jt,{stopwatchEntries:u,checkerEntries:O,raterEntries:v,counterEntries:_,stopwatches:t,raters:r,checkers:a,counters:i,selectedTrackers:o,dateStrings:T})})}))),ht=r.a.memo((function(e){var t=e.stopwatches,a=e.raters,r=e.checkers,s=e.counters,i=Object(n.useContext)(q.a),l=Object(n.useState)([]),d=Object(c.a)(l,2),u=d[0],j=d[1];Object(n.useEffect)((function(){t.length&&a.length&&j([a[0],t[0]])}),[t,a]);var b=Object(n.useState)([new Date,new Date]),h=Object(c.a)(b,2),m=h[0],O=h[1];console.log("rendering DataPanel"),Object(n.useEffect)((function(){i&&O([new Date(i.getFullYear(),i.getMonth(),i.getDate()-7),new Date(i.getFullYear(),i.getMonth(),i.getDate())])}),[i]);return Object(p.jsxs)("div",{className:Ze.a.DataPanel,children:[Object(p.jsx)(st,{todaysDate:i,dateRange:m,setDateRange:O}),Object(p.jsxs)("div",{className:Ze.a.Main,children:[Object(p.jsx)(at,{raters:a,stopwatches:t,checkers:r,counters:s,handler:function(e){var c=!1,n=[],i=[].concat(Object(o.a)(t),Object(o.a)(a),Object(o.a)(r),Object(o.a)(s)).filter((function(t){return e===t.id}))[0];i&&(u.forEach((function(t){t.id===e&&(c=!0)})),c&&(n=u.filter((function(t){return t.id!==e}))),c||(n=[].concat(Object(o.a)(u),[i]),"stopwatch"===i.type&&(n=n.filter((function(e){return"checker"!==e.type&&"counter"!==e.type}))),"checker"===i.type&&(n=n.filter((function(e){return"stopwatch"!==e.type&&"counter"!==e.type}))),"counter"===i.type&&(n=n.filter((function(e){return"stopwatch"!==e.type&&"checker"!==e.type})))),j(n))},selectedTrackers:u}),Object(p.jsx)(bt,{dateRange:m,stopwatches:t,selectedTrackers:u,raters:a,checkers:r,counters:s})]})]})})),mt=a(76),Ot=a.n(mt),ft=Object(i.b)((function(e){return{user:e.user,selectedView:e.selectedView}}));t.default=ft((function(e){var t=Object(n.useState)([]),a=Object(c.a)(t,2),r=a[0],o=a[1],s=Object(n.useState)([]),i=Object(c.a)(s,2),l=i[0],d=i[1],u=Object(n.useState)([]),j=Object(c.a)(u,2),b=j[0],m=j[1],O=Object(n.useState)([]),f=Object(c.a)(O,2),x=f[0],g=f[1],v=Object(n.useState)(!1),y=Object(c.a)(v,2),w=y[0],k=y[1],_=Object(n.useContext)(h.a),C=Object(n.useContext)(q.a);Object(n.useEffect)((function(){if(_){var t=Object(ve.b)(Object(ve.a)(_,"trackers"),{},(function(e){var t=[],a=[],c=[],n=[];e.empty&&k(!0),e.forEach((function(e){var r=e.data();switch(r.type){case"stopwatch":t.push(r);break;case"rater":a.push(r);break;case"counter":n.push(r);break;default:c.push(r)}})),o(t),m(c),d(a),g(n)}));return e.user||t(),t}}),[_,e.user]);var S=null,N=null;C&&e.user&&(S=Object(p.jsx)(ht,{stopwatches:r,raters:l,checkers:b,counters:x}),N=Object(p.jsx)(qe,{stopwatches:r,raters:l,checkers:b,counters:x,higherIsEmpty:w}));var T=N;return"data"===e.selectedView&&(T=S),Object(p.jsx)(te.a,{children:Object(p.jsx)("div",{className:Ot.a.Background,children:T})})}))}}]);
//# sourceMappingURL=4.cf6d5b5c.chunk.js.map